(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["childPage-vision-textRecognize"],{"1ae1":function(e,t,a){"use strict";a.r(t);var i=a("9beb"),n=a.n(i);for(var o in i)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(o);t["default"]=n.a},2909:function(e,t,a){"use strict";a("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,i.default)(e)||(0,n.default)(e)||(0,o.default)(e)||(0,c.default)()};var i=s(a("6005")),n=s(a("db90")),o=s(a("06c5")),c=s(a("3427"));function s(e){return e&&e.__esModule?e:{default:e}}},"338c":function(e,t,a){var i=a("ebef");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var n=a("4f06").default;n("0d1aee80",i,!0,{sourceMap:!1,shadowMode:!1})},"33ec":function(e,t,a){"use strict";var i=a("338c"),n=a.n(i);n.a},3427:function(e,t,a){"use strict";a("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},a("d9e2"),a("d401")},6005:function(e,t,a){"use strict";a("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(Array.isArray(e))return(0,i.default)(e)};var i=function(e){return e&&e.__esModule?e:{default:e}}(a("6b75"))},"80cb":function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return n})),a.d(t,"a",(function(){}));var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",[a("v-uni-view",{staticClass:"bigBox"},[a("v-uni-image",{staticClass:"bigImg",attrs:{mode:"aspectFit",src:e.src}}),a("v-uni-image",{staticClass:"upImg",attrs:{src:e.icon_img,mode:"aspectFit"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.previewImage.apply(void 0,arguments)}}}),a("v-uni-image",{staticClass:"downImg",attrs:{src:e.icon_img1,mode:""},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.savePhoto(e.src)}}})],1),a("v-uni-view",{staticClass:"title"},[e._v("识别结果")]),a("v-uni-view",{staticClass:"main"},[a("v-uni-text",{staticClass:"main_cont"},[e._v(e._s(e.content))])],1),a("v-uni-view",{staticClass:"copy",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.copyText(e.content)}}},[e._v("复制文本")]),a("v-uni-view",{staticClass:"footer"},[a("v-uni-view",{staticClass:"text"},[e._v("本次生成将消耗1.5w算力")]),a("v-uni-view",{staticClass:"record",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.historyText.apply(void 0,arguments)}}},[e._v("历史记录")]),a("v-uni-button",{staticClass:"btn",staticStyle:{"background-color":"#1F64FF",color:"#fff"},attrs:{size:"default",type:"default"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.toSlove.apply(void 0,arguments)}}},[e._v("上传图片")])],1)],1)},n=[]},"9beb":function(e,t,a){"use strict";(function(e){a("7a82");var i=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a("2909")),o=i(a("c7eb")),c=i(a("1da1"));a("d3b7"),a("159b");var s=a("2d63"),r={components:{},data:function(){return{src:e.baseImg+"/xcx/com/message_center/%E6%A1%88%E4%BE%8B%E5%9B%BE.png",icon_img:e.baseImg+"/xcx/com/message_center/Frame%20427320251.png",icon_img1:e.baseImg+"/xcx/com/message_center/Frame%20427319637.png",content:"视觉智能体验馆，领先的视觉智能技术，孵化AI产品新玩法",origin_image:"/xcx/com/message_center/%E6%A1%88%E4%BE%8B%E5%9B%BE.png"}},onShow:function(){""!=uni.getStorageSync("vison_code")&&this.historySession(uni.getStorageSync("vison_code"))},methods:{historySession:function(t){var a=this;(0,s.getImgDetail)(t).then((function(t){if(2e4==t.code){var i=t.data;i.forEach((function(t,n){n==i.length-2&&(a.src=e.baseImg+"/"+t.origin_image,a.origin_image=t.origin_image),n==i.length-1&&(a.content=t.result_list)})),uni.setStorageSync("vison_code","")}else a.$api.msg(t.msg)})).catch((function(e){a.$api.msg("获取历史记录失败！")}))},toSlove:function(){var t=this;return(0,c.default)((0,o.default)().mark((function a(){var i;return(0,o.default)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:i=t,uni.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(t){console.log(t,589);var a=t.tempFilePaths[0],n=t.tempFiles[0].size;n>5242880?i.$api.msg("该文件已超过5M，不能上传"):(uni.showLoading({title:"上传中"}),uni.uploadFile({url:e.loginUrl+"/api/user/oss_upload",filePath:a,name:"image",formData:{image:a,oss_dir:"static",cate:"create_character"},success:function(t){var a=JSON.parse(t.data);2e4==a.code?(i.src=e.baseImg+"/"+a.data.new_url,i.origin_image=a.data.new_url,console.log(a,333),uni.hideLoading(),i.mergeChange()):(i.$api.msg(a.msg),uni.hideLoading())}}))}});case 2:case"end":return a.stop()}}),a)})))()},mergeChange:function(){var e=this;return(0,c.default)((0,o.default)().mark((function t(){var a,i;return(0,o.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return uni.showLoading({title:"识别中..."}),a={chat_type:"19",action_type:3,prompt:"文字识别",origin_image:e.origin_image,model:"ocr_normal"},t.next=4,(0,s.createImg)(a);case 4:i=t.sent,2e4==i.code?e.content=(0,n.default)(i.data.results[0].result_list):40022==i.code?uni.showModal({content:i.msg,confirmText:"购买算力",success:function(e){e.confirm?uni.navigateTo({url:"/pages/user/vip/vip"}):e.cancel&&console.log("用户点击取消")}}):e.$api.msg(i.msg),uni.hideLoading();case 7:case"end":return t.stop()}}),t)})))()},previewImage:function(){uni.previewImage({urls:[this.src],current:this.src,loop:!0})},savePhoto:function(e){uni.showLoading({mask:!0,title:"下载中..."}),uni.downloadFile({url:e,success:function(e){if(200===e.statusCode){var t=document.createElement("a");t.download="",t.href=e.tempFilePath,document.body.appendChild(t),t.click(),t.remove(),uni.hideLoading()}else uni.hideLoading()},fail:function(e){console.log(e),uni.hideLoading()}})},historyText:function(){uni.navigateTo({url:"/childPage/vision/history_text?chat_type=19"})},copyText:function(e){wx.setClipboardData({data:e,success:function(){uni.showToast({title:"复制成功"})}})}}};t.default=r}).call(this,a("c8ba"))},a890:function(e,t,a){"use strict";a.r(t);var i=a("80cb"),n=a("1ae1");for(var o in n)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(o);a("33ec");var c=a("f0c5"),s=Object(c["a"])(n["default"],i["b"],i["c"],!1,null,"595bbaa6",null,!1,i["a"],void 0);t["default"]=s.exports},ebef:function(e,t,a){var i=a("24fb");t=i(!1),t.push([e.i,"uni-page-body[data-v-595bbaa6]{background:#fff}body.?%PAGE?%[data-v-595bbaa6]{background:#fff}.bigBox[data-v-595bbaa6]{position:relative;text-align:center;width:100%}.bigBox .bigImg[data-v-595bbaa6]{width:100%}.bigBox .downImg[data-v-595bbaa6]{width:%?55?%;height:%?55?%;position:absolute;bottom:%?20?%;right:%?20?%}.bigBox .upImg[data-v-595bbaa6]{width:%?55?%;height:%?55?%;position:absolute;bottom:%?95?%;right:%?20?%}.title[data-v-595bbaa6]{color:#1d2129;font-size:%?30?%;font-weight:500;padding:%?20?%}.copy[data-v-595bbaa6]{font-size:%?26?%;color:#0e39de;text-align:right;line-height:%?70?%;padding-right:%?35?%}.main[data-v-595bbaa6]{padding:%?10?% %?20?%;max-height:%?350?%;overflow:auto;background:#f6f8fb}.main .main_cont[data-v-595bbaa6]{color:#000;font-size:%?26?%;font-weight:400;max-height:%?350?%;padding:%?15?%;line-height:%?50?%}.footer[data-v-595bbaa6]{position:fixed;bottom:%?30?%;display:flex;align-items:center;justify-content:center;flex-direction:column;width:100%}.footer .text[data-v-595bbaa6]{font-size:%?30?%;color:#333;line-height:%?50?%}.footer .record[data-v-595bbaa6]{font-size:%?26?%;color:#0e39de;width:80%;text-align:right;line-height:%?50?%}.footer .btn[data-v-595bbaa6]{width:80%;height:%?75?%;line-height:200%}",""]),e.exports=t}}]);