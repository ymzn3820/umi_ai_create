(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["childCont-chest-picBodyRecognition"],{"1b4b":function(e,t,i){"use strict";(function(e){i("7a82");var n=i("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(i("c7eb")),o=n(i("1da1"));i("d3b7"),i("159b"),i("baa5");var s=i("2d63"),c={components:{},data:function(){return{ideaImg:e.baseImg+"/xcx/com/message_center/%E6%84%8F%E8%A7%81%E5%8F%8D%E9%A6%88.png",src:e.baseImg+"/xcx/com/message_center/txzt.jpg",icon_img:e.baseImg+"/xcx/com/message_center/Frame%20427320251.png",icon_img1:e.baseImg+"/xcx/com/message_center/Frame%20427319637.png",content:"",origin_image:"/xcx/com/message_center/txzt.jpg",setList:[]}},onShow:function(){""!=uni.getStorageSync("vison_code")&&this.historySession(uni.getStorageSync("vison_code"))},methods:{historySession:function(t){var i=this;(0,s.getImgDetail)(t).then((function(t){if(2e4==t.code){var n=t.data;n.forEach((function(t,a){a==n.length-2&&(i.src=e.baseImg+"/"+t.origin_image,i.origin_image=t.origin_image),a==n.length-1&&(i.content=t.result_list)})),uni.setStorageSync("vison_code","")}else i.$api.msg(t.msg)})).catch((function(e){i.$api.msg("获取历史记录失败！")}))},toSlove:function(){var t=this;uni.chooseImage({count:1,mediaType:["image"],sourceType:["album","camera"],maxDuration:30,camera:"back",success:function(i){var n=i.tempFilePaths[0],a=i.tempFiles[0].name.substring(i.tempFiles[0].name.lastIndexOf(".")+1),o=i.tempFiles[0].size;o>3145728?t.$api.msg("该文件已超过3M，不能上传"):"jpg"===a||"jpeg"===a||"png"===a||"bmp"===a?(uni.showLoading({title:"上传中"}),uni.uploadFile({url:e.loginUrl+"/api/user/oss_upload",filePath:n,name:"image",formData:{image:n,oss_dir:"static",cate:"create_character"},success:function(i){var n=JSON.parse(i.data);2e4==n.code?(t.src=e.baseImg+"/"+n.data.new_url,t.origin_image=n.data.new_url,t.active=0,uni.hideLoading()):(t.$api.msg(n.msg),uni.hideLoading())}})):t.$api.msg("只允许上传 .jpg、.png、.jpeg、.bmp格式的图片")}})},mergeChange:function(){var e=this;return(0,o.default)((0,a.default)().mark((function t(){var i,n;return(0,a.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return uni.showLoading({title:"识别中..."}),i={chat_type:"54",action_type:3,prompt:"图像主体检测",origin_image:e.origin_image},t.next=4,(0,s.createImg)(i);case 4:n=t.sent,2e4==n.code?e.setList=n.data.results[0].result_list:40022==n.code?uni.showModal({content:n.msg,confirmText:"购买算力",success:function(e){e.confirm?uni.navigateTo({url:"/pages/user/vip/vip"}):e.cancel&&console.log("用户点击取消")}}):e.$api.msg(n.msg),uni.hideLoading();case 7:case"end":return t.stop()}}),t)})))()},previewImage:function(){uni.previewImage({urls:[this.src],current:this.src,loop:!0})},savePhoto:function(e){uni.showLoading({mask:!0,title:"下载中..."}),uni.downloadFile({url:e,success:function(e){if(200===e.statusCode){var t=document.createElement("a");t.download="",t.href=e.tempFilePath,document.body.appendChild(t),t.click(),t.remove(),uni.hideLoading()}else uni.hideLoading()},fail:function(e){console.log(e),uni.hideLoading()}})},historyText:function(){uni.navigateTo({url:"/childCont/chest/history_chest?chat_type=54"})},copyText:function(e){wx.setClipboardData({data:e,success:function(){uni.showToast({title:"复制成功"})}})},toIdea:function(){uni.navigateTo({url:"/childPage/answer/answer"})}}};t.default=c}).call(this,i("c8ba"))},"1d96":function(e,t,i){var n=i("4f00");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=i("4f06").default;a("6c9307f6",n,!0,{sourceMap:!1,shadowMode:!1})},"4f00":function(e,t,i){var n=i("24fb");t=n(!1),t.push([e.i,"uni-page-body[data-v-3e9eeee4]{background:#fff}body.?%PAGE?%[data-v-3e9eeee4]{background:#fff}.bigBox[data-v-3e9eeee4]{position:relative;text-align:center;width:100%}.bigBox .bigImg[data-v-3e9eeee4]{width:100%}.bigBox .downImg[data-v-3e9eeee4]{width:%?55?%;height:%?55?%;position:absolute;bottom:%?20?%;right:%?20?%}.bigBox .upImg[data-v-3e9eeee4]{width:%?55?%;height:%?55?%;position:absolute;bottom:%?95?%;right:%?20?%}.title[data-v-3e9eeee4]{color:#1d2129;font-size:%?30?%;font-weight:500;padding:%?20?%}.copy[data-v-3e9eeee4]{font-size:%?26?%;color:#0e39de;text-align:right;line-height:%?70?%;padding-right:%?35?%}.main[data-v-3e9eeee4]{padding:%?10?% %?20?%;max-height:%?350?%;overflow:auto;background:#f6f8fb}.main .main_cont[data-v-3e9eeee4]{color:#000;font-size:%?26?%;font-weight:400;max-height:%?350?%;padding:%?15?%;line-height:%?50?%}.footer[data-v-3e9eeee4]{position:fixed;bottom:%?30?%;display:flex;align-items:center;justify-content:center;flex-direction:column;width:100%}.footer .text[data-v-3e9eeee4]{font-size:%?30?%;color:#333;line-height:%?50?%}.footer .record[data-v-3e9eeee4]{font-size:%?26?%;color:#0e39de;width:80%;text-align:right;line-height:%?50?%}.footer .btn[data-v-3e9eeee4]{width:80%;height:%?75?%;line-height:%?75?%}.der_setting[data-v-3e9eeee4]{padding:0 %?32?% %?210?% %?32?%}.der_setting .item[data-v-3e9eeee4]{display:flex;justify-content:space-between;margin-top:%?24?%}.der_setting .item .item_l[data-v-3e9eeee4]{color:#a4a4a4;font-size:%?28?%;line-height:150%\n  /* 21px */}.der_setting .item .item_r[data-v-3e9eeee4]{color:#000;font-size:%?28?%;line-height:150%\n  /* 21px */}.tips[data-v-3e9eeee4]{padding:%?10?% %?39?%;display:flex;align-items:center;justify-content:center;width:91%;margin-bottom:%?20?%;margin-top:%?60?%}.tip_m[data-v-3e9eeee4]{flex:1;color:#999;font-size:%?24?%}",""]),e.exports=t},"67ff":function(e,t,i){"use strict";i.r(t);var n=i("f1fe"),a=i("b5a4");for(var o in a)["default"].indexOf(o)<0&&function(e){i.d(t,e,(function(){return a[e]}))}(o);i("8789");var s=i("f0c5"),c=Object(s["a"])(a["default"],n["b"],n["c"],!1,null,"3e9eeee4",null,!1,n["a"],void 0);t["default"]=c.exports},8789:function(e,t,i){"use strict";var n=i("1d96"),a=i.n(n);a.a},b5a4:function(e,t,i){"use strict";i.r(t);var n=i("1b4b"),a=i.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){i.d(t,e,(function(){return n[e]}))}(o);t["default"]=a.a},baa5:function(e,t,i){var n=i("23e7"),a=i("e58c");n({target:"Array",proto:!0,forced:a!==[].lastIndexOf},{lastIndexOf:a})},f1fe:function(e,t,i){"use strict";i.d(t,"b",(function(){return n})),i.d(t,"c",(function(){return a})),i.d(t,"a",(function(){}));var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticStyle:{"background-color":"#FEFEFE",height:"100vh"}},[i("v-uni-view",{staticClass:"bigBox"},[i("v-uni-image",{staticClass:"bigImg",attrs:{mode:"aspectFit",src:e.src}}),i("v-uni-image",{staticClass:"upImg",attrs:{src:e.icon_img,mode:"aspectFit"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.previewImage.apply(void 0,arguments)}}}),i("v-uni-image",{staticClass:"downImg",attrs:{src:e.icon_img1,mode:""},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.savePhoto(e.src)}}})],1),i("v-uni-view",{staticClass:"tips"},[i("v-uni-text",{staticClass:"tip_m"},[e._v("Tips:检测图片中包含的物体名称等信息。")])],1),i("v-uni-view",{staticClass:"title"},[e._v("识别结果")]),""!=e.setList?i("v-uni-view",{staticClass:"der_setting"},e._l(e.setList,(function(t,n){return i("v-uni-view",{key:n,staticClass:"item"},[i("v-uni-view",{staticClass:"item_r"},[e._v(e._s(t.name))])],1)})),1):e._e(),i("v-uni-view",{staticClass:"footer"},[i("v-uni-view",{staticClass:"text"},[e._v("本次生成将消耗0.6w算力")]),i("v-uni-view",{staticClass:"record",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.historyText.apply(void 0,arguments)}}},[e._v("历史记录")]),i("v-uni-button",{staticClass:"btn",staticStyle:{"background-color":"#1F64FF",color:"#fff"},attrs:{size:"default",type:"default"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.toSlove.apply(void 0,arguments)}}},[e._v("上传图片")])],1)],1)},a=[]}}]);