(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["childPage-doppler-doppler"],{2067:function(t,i,e){var a=e("24fb");i=a(!1),i.push([t.i,".bottom-dh-char[data-v-02a413c8]{background-color:#fff;width:calc(100% - %?32?%);padding:%?16?%}.bottom_cont[data-v-02a413c8]{background:#fff;width:100%}.bottom_cont .bottom_cont[data-v-02a413c8]{display:flex;justify-content:center;flex-direction:column;padding-bottom:%?25?%}.bottom_cont .bottom_buy[data-v-02a413c8]{width:90%;height:%?80?%;background:#1f64ff;border-radius:6px;font-style:normal;font-weight:500;font-size:14px;line-height:20px;color:#fff;display:flex;justify-content:center;align-items:center;margin:%?20?% auto 0}.isPosition[data-v-02a413c8]{position:fixed;z-index:99}.flex-column-center[data-v-02a413c8]{position:fixed;left:0;bottom:0;width:100%}.ex_ul[data-v-02a413c8]{width:100%;display:flex;align-items:center;justify-content:center}.ex_time[data-v-02a413c8]{width:calc(100% - %?40?%);box-shadow:0 2px 10px 0 rgba(51,51,51,.1);border-radius:%?10?%;background:#fff;margin-top:%?20?%;display:flex;align-items:center;justify-content:center;flex-direction:column;height:%?500?%}.ex_time .wait_text[data-v-02a413c8]{color:#000;font-size:%?28?%;font-style:normal;font-weight:400;line-height:150%;padding:%?15?%;word-break:break-all}.ex_time .upload_img[data-v-02a413c8]{width:%?160?%;height:%?160?%}.ex_time .upload_text[data-v-02a413c8]{color:#666;font-size:%?26?%;font-style:normal;font-weight:400;line-height:150%;padding:%?20?% 0}.ex_img[data-v-02a413c8]{width:calc(100% - %?40?%);box-shadow:0 2px 10px 0 rgba(51,51,51,.1);border-radius:%?10?%;position:relative;background:#fff;margin-top:%?20?%;display:flex;align-items:center;justify-content:center}.ex_img .li_img[data-v-02a413c8]{width:100%;height:%?500?%;border-radius:%?10?%}.ex_img .del_img[data-v-02a413c8]{position:absolute;top:0;right:0;width:%?36?%;height:%?36?%}.ex_img .ex_tip[data-v-02a413c8]{position:absolute;top:0;right:0;background:rgba(0,0,0,.3);border-radius:0 %?10?% 0 %?10?%;color:#fff;font-size:%?22?%;font-style:normal;font-weight:400;line-height:150%;padding:%?5?% %?10?%}.ex_img .ex_use[data-v-02a413c8]{position:absolute;bottom:%?30?%;border-radius:%?8?%;background:#1f64ff;padding:%?15?% %?30?%;display:flex;justify-content:center;align-items:center;font-size:%?32?%;font-weight:500;color:#fff}.ex_img .ex_update[data-v-02a413c8]{position:absolute;bottom:%?0?%;right:%?0?%;background:rgba(0,0,0,.3);border-radius:%?10?%;padding:%?15?%}.ex_img .ex_btn[data-v-02a413c8]{position:absolute;bottom:%?0?%;right:%?0?%;background:rgba(0,0,0,.3);border-radius:%?10?%;padding:%?15?%;display:flex;align-items:flex-start}.ex_img .ex_btn .btn_text[data-v-02a413c8]{color:#fff;font-size:%?22?%;padding-left:%?10?%}.ex_img .ex_like[data-v-02a413c8]{background:rgba(0,0,0,.3);border-radius:%?10?%;padding:%?10?%}.ex_img .ex_nlike[data-v-02a413c8]{background:rgba(31,100,255,.3);border-radius:%?10?%;padding:%?10?%}.ex_img .like_up[data-v-02a413c8]{position:absolute;top:%?20?%;right:%?20?%}.ex_img .like_down[data-v-02a413c8]{position:absolute;top:%?100?%;right:%?20?%}.ex_img .ex_upload[data-v-02a413c8]{position:absolute;top:%?180?%;right:%?20?%}.query[data-v-02a413c8]{padding:%?30?% %?20?% %?20?% %?20?%;background:#fff;margin-top:%?20?%}.query .query_type[data-v-02a413c8]{display:flex;align-items:center;justify-content:space-between;border-bottom:%?1?% solid #dbdbdb}.query .query_type .active_tabs[data-v-02a413c8]{font-style:normal;font-weight:500;font-size:%?28?%;line-height:%?50?%;color:#000;border-bottom:%?4?% solid #1f64ff;padding:%?7?% 0}.query .query_type .tabs[data-v-02a413c8]{font-style:normal;font-weight:500;font-size:%?28?%;line-height:%?50?%;color:#000;padding:%?7?% 0}.query_li[data-v-02a413c8]{display:flex;align-items:center;justify-content:flex-start;flex-wrap:wrap;margin-bottom:%?180?%}.li_size[data-v-02a413c8]{width:17%;height:%?120?%;border-radius:%?10?%;position:relative;margin:%?10?% 1%;display:flex;flex-direction:column;align-items:center;justify-content:center}.li_size .size_back[data-v-02a413c8]{width:100%;height:%?80?%;display:flex;align-items:center;justify-content:center}.li_size .size_back .size_zheng[data-v-02a413c8]{width:%?40?%;height:%?40?%}.li_size .size_back .size_chang[data-v-02a413c8]{width:%?60?%;height:%?40?%}.li_size .size_back .size_gao[data-v-02a413c8]{width:%?40?%;height:%?60?%}.li_size .size_tip[data-v-02a413c8]{height:%?40?%;text-align:center;font-size:%?24?%;line-height:%?40?%}.btn_link[data-v-02a413c8]{display:flex;align-items:center;justify-content:space-between;width:calc(100% - %?30?%);background:#fff;border-top:1px solid #dbdbdb;padding:%?10?% %?15?% 0 %?15?%}.btn_link .link_l[data-v-02a413c8]{display:flex;align-items:center}.btn_link .link_l .l_chat[data-v-02a413c8]{border-radius:%?6?%;border:%?1?% solid #1f64ff;padding:%?5?% %?10?%;color:#1f64ff;font-size:%?24?%;font-style:normal;font-weight:400;line-height:150%;display:flex;align-items:center}.btn_link .link_l .l_text[data-v-02a413c8]{padding-left:%?8?%;color:#1f64ff;font-size:%?24?%}.btn_link .link_l .l_wait[data-v-02a413c8]{padding-left:%?8?%;color:#333;font-size:%?24?%}.cont_title[data-v-02a413c8]{padding:%?25?% 0 0 0;display:flex;align-items:center;justify-content:center;flex-direction:column}.cont_title .title_t[data-v-02a413c8]{display:flex}.cont_title .title_t .t_left[data-v-02a413c8]{color:#000;text-align:center;font-size:%?28?%;font-style:normal;font-weight:400;line-height:%?40?%}.cont_title .title_t .t_right[data-v-02a413c8]{color:#1f64ff;text-align:center;font-size:%?28?%;font-style:normal;font-weight:400;line-height:%?40?%}",""]),t.exports=i},"3e15":function(t,i,e){"use strict";var a=e("d4ba"),s=e.n(a);s.a},"44a8":function(t,i,e){"use strict";(function(t){e("7a82"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,e("14d9");var a=e("0a1b"),s=e("2d63"),n={components:{},data:function(){return{draw_tip:!1,sd_timer:0,sd_t_time:0,sd_desc:"",sd_draw_time:0,sd_msgLoad:!1,modelShow:!1,modelList:[],modelValue:"",modelIndex:"",StableDiffusionList:[],sd_wait:0,sd_complete:"",sd_show:!1,samplerShow:!1,sdText:"",sdHideText:"",imgList:[],sd_type:1,sd_photo_type:1,queryIndex:0,isSd:!0,active:0,chat_type:9,chatType:"Stable Diffusion",isuser:!0,avatar:"",userInfo:"",dallshow:!1,selectDone:0,size:"512*768",sizeIndex:0,query_type:1,sdList:[{id:"512*768",size:"512*768",type:"gao"},{id:"512*512",size:"512*512",type:"zheng"},{id:"768*512",size:"768*512",type:"chang"}],delImg:t.baseImg+"/xcx/853ff4b9-283a-4917-b922-f2329cbcb562.jpg"}},onShow:function(){this.isuser=!0},onLoad:function(t){},onHide:function(){},methods:{submit:function(){this.isSd&&(0!=this.imgList.length?(this.isuser=!0,this.draw_tip=!1,this.isSd=!1,this.StableDiffusionList=[],this.sd_msgLoad=!0,this.sdDraw()):this.$api.msg("请上传四维彩超图"))},sdDraw:function(){var i={chat_type:"-1",action_type:"5",images:this.imgList,content:"masterpiece, 8k, great job, hd, baby, {1 year old baby}, {Wearing cute clothes},cute, indoors, realistic skin, detailed skin texture, light on face, eyes open, asian baby, real,Full body or half body",content_zh:"",negative_prompt:"Low resolution, fake skin, rough skin texture, open eyes, non-Asian baby, deformed fingers, deformed body, deformed face, brightness,naked",negative_prompt_zh:"",sd_model_checkpoint:"儿童摄影WFChild_v1.0",sampler_index:"DPM++ 2M Karras",size:this.size,app_type:2,session_code:""},e=this;e.sd_timer=0,e.sd_t_time=setInterval((function(){e.sd_timer+=1}),1e3),e.imgList=[],(0,a.sdDraw)(i).then((function(i){if(2e4==i.code){var s={tag:i.data.tag},n=0;e.sd_draw_time=setInterval((function(){n<101?(0,a.getSdDraw)(s).then((function(a){if(2e4==a.code){if(n+=1,null!=a.data)if(e.isSd=!0,1==a.data[0].is_mod&&e.$api.msg("图片内容涉及敏感请重新提问。"),0==a.data[0].status){var s=[],o={url:t.baseImg+"/"+a.data[0].content};s.push(o);var l={create_time:a.data[0].create_time,finish_reason:"stop",session_code:a.data[0].session_code,chat_group_code:a.data[0].chat_group_code,size:a.data[0].size,role:"assistant",image_urls:s,time:e.sd_timer,is_mod:a.data[0].is_mod,is_like:0},d=[];d.push(l),0==e.StableDiffusionList.length&&(e.StableDiffusionList=d),e.isuser=!0,e.sd_msgLoad=!1,clearInterval(e.sd_t_time),clearInterval(e.sd_draw_time);var c={type_name:"彩超宝宝",type_code:"cdu",title:"彩超宝宝",eid:a.data[0].session_code,image_url:a.data[0].content};e.saveFootprint(c)}else 1==a.data[0].status&&(e.sd_msgLoad=!1,clearInterval(e.sd_t_time),clearInterval(e.sd_draw_time),e.$api.msg("生成失败，本次不消耗绘画次数"),e.isSd=!0)}else e.sd_msgLoad=!1,clearInterval(e.sd_t_time),clearInterval(e.sd_draw_time),e.$api.msg(i.msg),e.isSd=!0})):(e.sd_msgLoad=!1,clearInterval(e.sd_t_time),clearInterval(e.sd_draw_time),e.$api.msg("等待时间过长，请稍后前往历史记录查看"),e.isSd=!0)}),2e3)}else i.code<49999?(e.isuser=!1,e.sd_msgLoad=!1,e.isSd=!0,clearInterval(e.sd_t_time),clearInterval(e.sd_draw_time),e.sd_desc=i.msg,40022==i.code?e.draw_tip=!0:e.draw_tip=!1):(e.sd_msgLoad=!1,clearInterval(e.sd_t_time),clearInterval(e.sd_draw_time),e.$api.msg(i.msg),e.isSd=!0)})).catch((function(t){e.sd_msgLoad=!1,clearInterval(e.sd_t_time),clearInterval(e.sd_draw_time),e.$api.msg("绘图失败"),e.isSd=!0}))},goMember:function(){var t=JSON.parse(uni.getStorageSync("userInfo"));"guess"==t.role?uni.navigateTo({url:"/pages/login/login"}):uni.navigateTo({url:"/pages/user/vip/vip"})},goToLogin:function(){uni.navigateTo({url:"/pages/login/login"})},toHistory:function(){uni.navigateTo({url:"/childPage/doppler/doppler_history"})},addDraw:function(){this.StableDiffusionList=[],this.imgList=[]},checkImg:function(t,i){var e;e=this.StableDiffusionList[t].image_urls;var a=e[i].url;uni.previewImage({urls:[a],current:0})},takePhoto:function(){var i=this;uni.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(e){var a=e.tempFilePaths[0];i.imgList=[],uni.showLoading({title:"上传中"}),uni.uploadFile({url:t.loginUrl+"/api/user/oss_upload",filePath:a,name:"image",formData:{image:a,oss_dir:"static",cate:"create_character"},success:function(t){var e=JSON.parse(t.data);if(console.log(e,333),2e4==e.code){var a=e.data.new_url;i.imgList.push(a),uni.hideLoading()}else i.$api.msg(e.msg),uni.hideLoading()}})}})},getImgUrl:function(i){return t.baseImg+"/"+i},selctSize:function(t,i){this.size=t,this.sizeIndex=i},saveFootprint:function(t){var i=this;(0,s.saveFootprint)(t).then((function(t){2e4==t.code||i.$api.msg(t.msg)})).catch((function(t){i.$api.msg("保存失败！")}))}}};i.default=n}).call(this,e("c8ba"))},"4dc4":function(t,i){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAAB+CAYAAAD/cVlWAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAANjSURBVHgB7d3BTSJhGIfxd0ZOeqEEvEgmMVmpYLUC7cAS1ArEClY6YDvYrUA6gBuRmEAJXMSoAfZ9ZdywmPyPy4Tv+SXIDMPJPHlnOMw3mW0YDoene3t758vl8sJ3G4YUDLIsG8zn87uiKCbrB7LPjX6/Xz84OLj1MK4NyfJQ7p+fn+9ardb0Yz/+RBz7+/sPvnnir+lisej4e89r6hl23mg0OvHpcZ3n+WX50WA2m51FJFn5hR/l5Jh4HGebYwZp8MuLhkcSg6IRk+To6OgmKz8cxxc8jkPiSFvZQ9836zEscr8gvS2PdYkD0UB5iRHXIxe5n1riusPe3987Bqz04o8Hcp49Pj4uY6fZbGYGlD67yA0QCAQSgUAiEEgEAolAIBEIJAKBRCCQCAQSgUAiEEgEAolAIBEIJAKBRCCQCAQSgUAiEEgEAolAINUM/3h6erqcz+f3vhk3L7ebzeZPSxgTZIPH0fa3uq2Wvri3xBHIV4217boljkAgEQgkAoFEIJAIBBKBQCIQSAQCiUAgEQgkAoFEIJAIBBKBQCIQSAQCiUAgEQgkAoFEIJAIBBKBQCIQSAQCiUAgEQgkAoFEIJAIBFLl1gdZW5+jEnfWfz4e9D+aWIXWJancBFlbnyNVDavQuiRVPMUkvyaHrVY3qoTKBbJYLG5sNWZTNfX/wZ1VROWuQYqi6Ppb17Zk85oj9UfW8ysGEoFAIhBIBAKJQCARCCQCgUQgkAgEEoFAIhBIBAKJQCARCCQCgUQgkAgEEoFAIhBIBAKJQCARCCQCgUQgkAgEEoFAIhBIBPLV+p31E0scgWxYW12gUnfZb0vl7u7ftm2vLlA1TBBIBAKJQCARCCQCgUQgkAgEEoFAIhBIBAKJQCARCCQCgUQgkAgEEoFAIhBIBAKJQCARCCQCgUQgkCKQSWwMh8NTA9xoNDopNwf5crn8Xe6cGrByVb4PspgceZ4/2OpOslZRFBNDsryHhvcwjm3v4TD3IHo+RTq+X49Q4guGJJVxxLCwaCKGxcdDg8fjcf3t7S0OfJx7sizr+n7n+Ph4YNh5cRap1WrffWJc+27dX4PZbHbWarWmf58qHZG8vr62PY4rQ7Jicry8vLQjjtj/8tjx8hTT9lHzzcqJgp03iR8r/voVlxzrB/4AvzcBS756bZ4AAAAASUVORK5CYII="},"9e03":function(t,i,e){"use strict";e.r(i);var a=e("c641"),s=e("d06e");for(var n in s)["default"].indexOf(n)<0&&function(t){e.d(i,t,(function(){return s[t]}))}(n);e("3e15");var o=e("f0c5"),l=Object(o["a"])(s["default"],a["b"],a["c"],!1,null,"02a413c8",null,!1,a["a"],void 0);i["default"]=l.exports},c641:function(t,i,e){"use strict";e.d(i,"b",(function(){return s})),e.d(i,"c",(function(){return n})),e.d(i,"a",(function(){return a}));var a={uIcon:e("0289").default,uLoadingIcon:e("fda4").default,uButton:e("6905").default},s=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("v-uni-view",[a("v-uni-view",[a("v-uni-view",{staticClass:"cont_title"},[a("v-uni-view",{staticClass:"title_t"},[a("v-uni-text",{staticClass:"t_left"},[t._v("给我一张")]),a("v-uni-text",{staticClass:"t_right"},[t._v("四维彩超")])],1),a("v-uni-view",{staticClass:"title_t"},[a("v-uni-text",{staticClass:"t_left"},[t._v("我能给你宝宝预测出未来模样")])],1)],1),!t.sd_msgLoad&&0==t.StableDiffusionList.length&&t.isuser?a("v-uni-view",{staticClass:"ex_ul"},[0==t.imgList.length?a("v-uni-view",{staticClass:"ex_time"},[a("v-uni-image",{staticClass:"upload_img",attrs:{src:e("4dc4"),mode:"aspectFit"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.takePhoto.apply(void 0,arguments)}}}),a("v-uni-view",{staticClass:"upload_text"},[t._v("点击上传小宝宝的四维彩超图")])],1):t._e(),t._l(t.imgList,(function(i,e){return t.imgList.length>0?a("v-uni-view",{key:e,staticClass:"ex_img",staticStyle:{position:"relative"}},[a("v-uni-image",{staticClass:"li_img",attrs:{src:t.getImgUrl(i),alt:"",mode:"aspectFit"}}),a("img",{staticClass:"del_img",attrs:{src:t.delImg,alt:""},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.imgList.splice(e,1)}}})],1):t._e()}))],2):t._e(),t._l(t.StableDiffusionList,(function(i,e){return!t.sd_msgLoad&&t.StableDiffusionList.length>0&&t.isuser?a("v-uni-view",{key:e,staticClass:"ex_ul"},t._l(i.image_urls,(function(i,s){return a("v-uni-view",{key:s,staticClass:"ex_img"},[a("v-uni-image",{staticClass:"li_img",attrs:{src:i.url,alt:"",mode:"aspectFit"},on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.checkImg(e,s)}}}),a("v-uni-view",{staticClass:"ex_btn"},[a("u-icon",{attrs:{name:"warning",color:"#fff",size:"18"}}),a("v-uni-text",{staticClass:"btn_text"},[t._v("当前内容为AI生成，不做任何决策使用！由此引发的一切后果，需自行承担，请知悉,已通过阿里云内容安全审核")])],1)],1)})),1):t._e()})),t.sd_msgLoad?a("v-uni-view",{staticClass:"ex_ul"},[a("v-uni-view",{staticClass:"ex_time"},[a("u-loading-icon",{attrs:{textSize:"20"}}),a("v-uni-view",{staticClass:"wait_text"},[t._v("生成中,耗时"+t._s(t.sd_timer)+"秒")])],1)],1):t._e(),t.sd_msgLoad||t.isuser?t._e():a("v-uni-view",{staticClass:"ex_ul"},[a("v-uni-view",{staticClass:"ex_time"},[a("v-uni-view",{staticClass:"wait_text"},[t._v(t._s(t.sd_desc))]),1==t.draw_tip?a("v-uni-view",{staticStyle:{display:"flex","justify-content":"space-around"}},[a("u-button",{attrs:{type:"warning",color:"#FF9B17",customStyle:{"border-radius":"8px","margin-top":"10px",width:"100%"}},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.goMember.apply(void 0,arguments)}}},[t._v("开通流量包")])],1):t._e()],1)],1),a("v-uni-view",{staticClass:"query"},[a("v-uni-view",{staticClass:"query_type"},[a("v-uni-view",{staticClass:"tabs"},[t._v("参数")])],1),a("v-uni-view",{staticClass:"query_li"},t._l(t.sdList,(function(i,e){return a("v-uni-view",{key:e,staticClass:"li_size",style:[{border:t.sizeIndex==e?"1px solid #1F64FF":"1px solid #999"}],on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.selctSize(i.size,e)}}},[a("v-uni-view",{staticClass:"size_back"},["zheng"===i.type?a("v-uni-view",{staticClass:"size_zheng",style:[{background:t.sizeIndex==e?"#B2CAFF":"#DDD"}]}):t._e(),"gao"===i.type?a("v-uni-view",{staticClass:"size_gao",style:[{background:t.sizeIndex==e?"#B2CAFF":"#DDD"}]}):t._e(),"chang"===i.type?a("v-uni-view",{staticClass:"size_chang",style:[{background:t.sizeIndex==e?"#B2CAFF":"#DDD"}]}):t._e()],1),a("v-uni-view",{staticClass:"size_tip",style:[{color:t.sizeIndex==e?"#1F64FF":"#999"}]},[t._v(t._s(i.size))])],1)})),1)],1)],2),a("v-uni-view",{staticClass:"flex-column-center"},[a("v-uni-view",{staticClass:"btn_link"},[a("v-uni-view",{staticClass:"link_l"},[t.StableDiffusionList.length>0?a("v-uni-view",{staticClass:"l_chat",staticStyle:{"margin-right":"15rpx"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.addDraw.apply(void 0,arguments)}}},[a("u-icon",{attrs:{name:"plus",color:"#1F64FF",size:"14"}}),a("v-uni-text",{staticClass:"l_text"},[t._v("新绘画")])],1):t._e()],1),a("v-uni-view",{staticClass:"link_l"},[a("v-uni-text",{staticClass:"l_text",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.toHistory.apply(void 0,arguments)}}},[t._v("历史记录")])],1)],1),a("v-uni-view",{staticClass:"bottom-dh-char",staticStyle:{"font-size":"55rpx"}},[a("v-uni-view",{staticClass:"bottom_cont"},[a("v-uni-view",{staticClass:"bottom_cont"},[a("v-uni-view",{staticClass:"bottom_buy",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.submit.apply(void 0,arguments)}}},[t._v("AI生成")])],1)],1)],1)],1)],1)},n=[]},d06e:function(t,i,e){"use strict";e.r(i);var a=e("44a8"),s=e.n(a);for(var n in a)["default"].indexOf(n)<0&&function(t){e.d(i,t,(function(){return a[t]}))}(n);i["default"]=s.a},d4ba:function(t,i,e){var a=e("2067");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var s=e("4f06").default;s("4dc49306",a,!0,{sourceMap:!1,shadowMode:!1})}}]);