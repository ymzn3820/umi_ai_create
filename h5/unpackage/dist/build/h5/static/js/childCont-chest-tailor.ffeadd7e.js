(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["childCont-chest-tailor"],{"01b7":function(e,t,i){var n=i("a590");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=i("4f06").default;a("1d7a030e",n,!0,{sourceMap:!1,shadowMode:!1})},"4dc4":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAAB+CAYAAAD/cVlWAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAANjSURBVHgB7d3BTSJhGIfxd0ZOeqEEvEgmMVmpYLUC7cAS1ArEClY6YDvYrUA6gBuRmEAJXMSoAfZ9ZdywmPyPy4Tv+SXIDMPJPHlnOMw3mW0YDoene3t758vl8sJ3G4YUDLIsG8zn87uiKCbrB7LPjX6/Xz84OLj1MK4NyfJQ7p+fn+9ardb0Yz/+RBz7+/sPvnnir+lisej4e89r6hl23mg0OvHpcZ3n+WX50WA2m51FJFn5hR/l5Jh4HGebYwZp8MuLhkcSg6IRk+To6OgmKz8cxxc8jkPiSFvZQ9836zEscr8gvS2PdYkD0UB5iRHXIxe5n1riusPe3987Bqz04o8Hcp49Pj4uY6fZbGYGlD67yA0QCAQSgUAiEEgEAolAIBEIJAKBRCCQCAQSgUAiEEgEAolAIBEIJAKBRCCQCAQSgUAiEEgEAolAINUM/3h6erqcz+f3vhk3L7ebzeZPSxgTZIPH0fa3uq2Wvri3xBHIV4217boljkAgEQgkAoFEIJAIBBKBQCIQSAQCiUAgEQgkAoFEIJAIBBKBQCIQSAQCiUAgEQgkAoFEIJAIBBKBQCIQSAQCiUAgEQgkAoFEIJAIBFLl1gdZW5+jEnfWfz4e9D+aWIXWJancBFlbnyNVDavQuiRVPMUkvyaHrVY3qoTKBbJYLG5sNWZTNfX/wZ1VROWuQYqi6Ppb17Zk85oj9UfW8ysGEoFAIhBIBAKJQCARCCQCgUQgkAgEEoFAIhBIBAKJQCARCCQCgUQgkAgEEoFAIhBIBAKJQCARCCQCgUQgkAgEEoFAIhBIBPLV+p31E0scgWxYW12gUnfZb0vl7u7ftm2vLlA1TBBIBAKJQCARCCQCgUQgkAgEEoFAIhBIBAKJQCARCCQCgUQgkAgEEoFAIhBIBAKJQCARCCQCgUQgkCKQSWwMh8NTA9xoNDopNwf5crn8Xe6cGrByVb4PspgceZ4/2OpOslZRFBNDsryHhvcwjm3v4TD3IHo+RTq+X49Q4guGJJVxxLCwaCKGxcdDg8fjcf3t7S0OfJx7sizr+n7n+Ph4YNh5cRap1WrffWJc+27dX4PZbHbWarWmf58qHZG8vr62PY4rQ7Jicry8vLQjjtj/8tjx8hTT9lHzzcqJgp03iR8r/voVlxzrB/4AvzcBS756bZ4AAAAASUVORK5CYII="},"7c2f":function(e,t,i){"use strict";i.r(t);var n=i("b5c1"),a=i("ee38");for(var o in a)["default"].indexOf(o)<0&&function(e){i.d(t,e,(function(){return a[e]}))}(o);i("a5be");var s=i("f0c5"),c=Object(s["a"])(a["default"],n["b"],n["c"],!1,null,"3ce60565",null,!1,n["a"],void 0);t["default"]=c.exports},a590:function(e,t,i){var n=i("24fb");t=n(!1),t.push([e.i,".main .upload[data-v-3ce60565]{width:100%;height:%?520?%;border-radius:%?16?% %?16?% 0 0;background:#ebebeb;position:relative}.main .upload .box[data-v-3ce60565]{position:absolute;text-align:center;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.main .upload .pic_img[data-v-3ce60565]{width:%?160?%;height:%?160?%}.main .upload .pic_text[data-v-3ce60565]{color:#666;font-size:%?28?%;line-height:150%\n  /* 21px */}.main .pic[data-v-3ce60565]{width:100%;height:%?520?%;position:relative;padding:%?36?% 0;background-color:#000}.main .pic .avatar[data-v-3ce60565]{width:100%;height:100%}.main .tips[data-v-3ce60565]{display:flex;width:100%;height:%?68?%;color:#1d2129;text-align:center;align-items:center;font-size:%?24?%;background:#e8f3ff;padding-left:%?18?%}.main .setting[data-v-3ce60565]{padding:%?32?%}.main .setting .set_head[data-v-3ce60565]{color:#000;font-size:%?32?%;font-weight:500;line-height:150%\n  /* 24px */}.main .setting .set_item .set_cont[data-v-3ce60565]{color:#000;font-size:%?28?%;font-weight:400;line-height:150%\n  /* 21px */}.main .setting .set_item .int[data-v-3ce60565]{width:80%;height:%?76?%;border-radius:%?16?%;border:%?2?% solid #d7d9df;color:#b7b9c0;font-family:PingFang SC;font-size:%?28?%;font-weight:400;line-height:150%;\n  /* 21px */padding:0 %?28?%}.downImg[data-v-3ce60565]{width:%?55?%;height:%?55?%;position:absolute;bottom:%?40?%;right:%?20?%}.upImg[data-v-3ce60565]{width:%?55?%;height:%?55?%;position:absolute;bottom:%?120?%;right:%?20?%}.slider[data-v-3ce60565]{width:80%;margin-top:%?40?%;margin-left:%?80?%}.footer[data-v-3ce60565]{position:fixed;bottom:%?30?%;display:flex;align-items:center;justify-content:center;flex-direction:column;width:100%}.footer .text[data-v-3ce60565]{font-size:%?30?%;color:#333;line-height:%?50?%}.footer .record[data-v-3ce60565]{font-size:%?26?%;color:#0e39de;width:80%;text-align:right;line-height:%?50?%}.footer .btn[data-v-3ce60565]{width:80%;height:%?75?%;line-height:%?75?%}",""]),e.exports=t},a5be:function(e,t,i){"use strict";var n=i("01b7"),a=i.n(n);a.a},b5c1:function(e,t,i){"use strict";i.d(t,"b",(function(){return a})),i.d(t,"c",(function(){return o})),i.d(t,"a",(function(){return n}));var n={uIcon:i("0289").default},a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticStyle:{"background-color":"#FEFEFE",height:"100vh"}},[n("v-uni-view",{staticClass:"main"},[""==e.src?n("v-uni-view",{staticClass:"upload",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.toSlove.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"box"},[n("v-uni-image",{staticClass:"pic_img",attrs:{src:i("4dc4")}}),n("v-uni-view",{staticClass:"pic_text"},[e._v("上传图片")])],1)],1):n("v-uni-view",{staticClass:"pic",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.toSlove.apply(void 0,arguments)}}},[n("v-uni-image",{staticClass:"avatar",attrs:{src:e.src,mode:"aspectFit"}}),n("v-uni-image",{staticClass:"upImg",attrs:{src:e.icon_img,mode:"aspectFit"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.previewImage.apply(void 0,arguments)}}}),n("v-uni-image",{staticClass:"downImg",attrs:{src:e.icon_img1,mode:""},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.savePhoto(e.src)}}})],1),""==e.src?n("v-uni-view",{staticClass:"tips"},[n("u-icon",{attrs:{name:"info-circle-fill",color:"#1f64ff",size:"22"}}),n("v-uni-view",{staticStyle:{"margin-left":"16rpx"}},[e._v("上传小于3MB，分辨率小于2000x2000像素的图片生成更快哦")])],1):e._e(),n("v-uni-view",{staticClass:"setting"},[n("v-uni-view",{staticClass:"set_head"},[e._v("参数设置")]),n("v-uni-view",{staticClass:"set_item",staticStyle:{margin:"36rpx 0"}},[n("v-uni-view",{staticClass:"set_cont"},[e._v("裁剪宽度")]),n("v-uni-input",{staticClass:"int",attrs:{type:"number"},model:{value:e.wnum,callback:function(t){e.wnum=t},expression:"wnum"}})],1),n("v-uni-view",{staticClass:"set_item"},[n("v-uni-view",{staticClass:"set_cont"},[e._v("裁剪高度")]),n("v-uni-input",{staticClass:"int",attrs:{type:"number"},model:{value:e.hnum,callback:function(t){e.hnum=t},expression:"hnum"}})],1)],1)],1),n("v-uni-view",{staticClass:"footer"},[n("v-uni-view",{staticClass:"text"},[e._v("本次生成将消耗6w算力/次")]),n("v-uni-view",{staticClass:"record",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.historyText.apply(void 0,arguments)}}},[e._v("历史记录")]),n("v-uni-button",{staticClass:"btn",staticStyle:{"background-color":"#1F64FF",color:"#fff"},attrs:{size:"default",type:"default"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.mergeChange.apply(void 0,arguments)}}},[e._v("一键生成")])],1)],1)},o=[]},baa5:function(e,t,i){var n=i("23e7"),a=i("e58c");n({target:"Array",proto:!0,forced:a!==[].lastIndexOf},{lastIndexOf:a})},e471:function(e,t,i){"use strict";(function(e){i("7a82");var n=i("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(i("c7eb")),o=n(i("1da1"));i("d3b7"),i("159b"),i("baa5");var s=i("2d63"),c={data:function(){return{active:0,blur:0,src:"",icon_img:e.baseImg+"/xcx/com/message_center/Frame%20427320251.png",icon_img1:e.baseImg+"/xcx/com/message_center/Frame%20427319637.png",default:e.baseImg+"/xcx/com/message_center/%E7%BE%8E%E5%A5%B31.png",ideaImg:e.baseImg+"/xcx/com/message_center/%E6%84%8F%E8%A7%81%E5%8F%8D%E9%A6%88.png",wnum:100,hnum:200,origin_image:"xcx/com/message_center/bbxbigpic.png"}},onShow:function(){""!=uni.getStorageSync("vison_code")&&this.historySession(uni.getStorageSync("vison_code"))},methods:{historySession:function(t){var i=this;(0,s.getImgDetail)(t).then((function(t){if(2e4==t.code){var n=t.data;n.forEach((function(t,a){a==n.length-2&&("hkcartoon"==t.style&&(i.active=2),"jpcartoon"==t.style&&(i.active=1)),a==n.length-1&&(i.src=e.baseImg+"/"+t.result_image)})),uni.setStorageSync("vison_code","")}else i.$api.msg(t.msg)})).catch((function(e){i.$api.msg("获取历史记录失败！")}))},mergeChange:function(){var t=this;return(0,o.default)((0,a.default)().mark((function i(){var n,o;return(0,a.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(""!=t.src){i.next=3;break}return t.$api.msg("请上传图片"),i.abrupt("return");case 3:if(uni.showLoading({title:"生成中..."}),console.log(t.origin_image,t.refer_image),""!=t.origin_image){i.next=7;break}return i.abrupt("return",t.$api.msg("请上传人物照片"));case 7:if(""!=t.refer_image){i.next=9;break}return i.abrupt("return",t.$api.msg("请上传背景照片"));case 9:return n={chat_type:"33",action_type:5,prompt:"照片裁剪",origin_image:t.origin_image,size:t.hnum+"*"+t.wnum},i.next=12,(0,s.createImg)(n);case 12:o=i.sent,2e4==o.code?t.src=e.baseImg+"/"+o.data.results[0].result_image:40022==o.code?uni.showModal({content:o.msg,confirmText:"购买算力",success:function(e){e.confirm?uni.navigateTo({url:"/pages/user/vip/vip"}):e.cancel&&console.log("用户点击取消")}}):t.$api.msg(o.msg),uni.hideLoading();case 15:case"end":return i.stop()}}),i)})))()},savePhoto:function(e){uni.showLoading({mask:!0,title:"下载中..."}),uni.downloadFile({url:e,success:function(e){if(200===e.statusCode){var t=document.createElement("a");t.download="",t.href=e.tempFilePath,document.body.appendChild(t),t.click(),t.remove(),uni.hideLoading()}else uni.hideLoading()},fail:function(e){console.log(e),uni.hideLoading()}})},previewImage:function(){uni.previewImage({urls:[this.src],current:this.src,loop:!0})},historyText:function(){uni.navigateTo({url:"/childCont/chest/history_chest?chat_type=33"})},toSlove:function(){var t=this;return(0,o.default)((0,a.default)().mark((function i(){var n;return(0,a.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:n=t,uni.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(t){console.log(t,589);var i=t.tempFilePaths[0],a=t.tempFiles[0].name.substring(t.tempFiles[0].name.lastIndexOf(".")+1),o=t.tempFiles[0].size;o>3670016?n.$api.msg("该文件已超过3.5M，不能上传"):"jpg"==a||"jpeg"==a||"png"==a||"bmp"==a||"webp"==a?(uni.showLoading({title:"上传中"}),uni.uploadFile({url:e.loginUrl+"/api/user/oss_upload",filePath:i,name:"image",formData:{image:i,oss_dir:"static",cate:"create_character"},success:function(t){var i=JSON.parse(t.data);2e4==i.code?(n.src=e.baseImg+"/"+i.data.new_url,n.origin_image=i.data.new_url,console.log(i,333),uni.hideLoading()):(n.$api.msg(i.msg),uni.hideLoading())}})):n.$api.msg("只允许上传 .jpg、.jpeg、.png、.bmp、.webp格式的图片")}});case 2:case"end":return i.stop()}}),i)})))()},toIdea:function(){uni.navigateTo({url:"/childPage/answer/answer"})}}};t.default=c}).call(this,i("c8ba"))},ee38:function(e,t,i){"use strict";i.r(t);var n=i("e471"),a=i.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){i.d(t,e,(function(){return n[e]}))}(o);t["default"]=a.a}}]);