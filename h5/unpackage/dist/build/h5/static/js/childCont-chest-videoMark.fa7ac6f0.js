(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["childCont-chest-videoMark"],{"0e84":function(e,t,a){"use strict";a.r(t);var n=a("f1b3"),i=a("40fe");for(var o in i)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(o);a("a90a");var r=a("f0c5"),s=Object(r["a"])(i["default"],n["b"],n["c"],!1,null,"34eb1086",null,!1,n["a"],void 0);t["default"]=s.exports},2909:function(e,t,a){"use strict";a("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,n.default)(e)||(0,i.default)(e)||(0,o.default)(e)||(0,r.default)()};var n=s(a("6005")),i=s(a("db90")),o=s(a("06c5")),r=s(a("3427"));function s(e){return e&&e.__esModule?e:{default:e}}},3427:function(e,t,a){"use strict";a("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},a("d9e2"),a("d401")},"40fe":function(e,t,a){"use strict";a.r(t);var n=a("49c9"),i=a.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(o);t["default"]=i.a},"49c9":function(e,t,a){"use strict";(function(e){a("7a82");var n=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a("2909")),o=n(a("c7eb")),r=n(a("1da1"));a("d3b7"),a("159b"),a("5db7"),a("73d9"),a("07ac"),a("e9c4"),a("baa5");var s=a("2d63"),c={data:function(){return{ideaImg:e.baseImg+"/xcx/com/message_center/%E6%84%8F%E8%A7%81%E5%8F%8D%E9%A6%88.png",active:0,blur:0,src:e.baseImg+"/xcx/com/message_center/百宝箱视频降噪.mp4",origin_image:"/xcx/com/message_center/%E4%BA%BA%E7%89%A912.png",icon_img:e.baseImg+"/xcx/com/message_center/Frame%20427320251.png",icon_img1:e.baseImg+"/xcx/com/message_center/Frame%20427319637.png",default:e.baseImg+"/xcx/com/message_center/%E7%BE%8E%E5%A5%B31.png",defaultSrc:e.baseImg+"/xcx/com/message_center/默认.png",clearSrc:e.baseImg+"/xcx/com/message_center/百宝箱示例.png",markList:{},markArr:[]}},onShow:function(){""!=uni.getStorageSync("vison_code")&&this.historySession(uni.getStorageSync("vison_code"))},methods:{historySession:function(t){var a=this;(0,s.getImgDetail)(t).then((function(t){if(2e4==t.code){var n=t.data;n.forEach((function(t,i){i==n.length-2&&("hkcartoon"==t.style&&(a.active=2),"jpcartoon"==t.style&&(a.active=1)),i==n.length-1&&(a.src=e.baseImg+"/"+t.result_image)})),uni.setStorageSync("vison_code","")}else a.$api.msg(t.msg)})).catch((function(e){a.$api.msg("获取历史记录失败！")}))},mergeChange:function(){var e=this;return(0,r.default)((0,o.default)().mark((function t(){var a,n,i,c;return(0,o.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return uni.showLoading({title:"生成中..."}),a={chat_type:"46",action_type:6,file_extension:"mp4",prompt:"视频评分",origin_image:e.origin_image,model:"general"},t.prev=2,t.next=5,(0,s.asyncImg)(a);case 5:n=t.sent,2e4==n.code?(i=0,c=setInterval((0,r.default)((0,o.default)().mark((function t(){var a,r;return(0,o.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(i<51)){t.next=7;break}return t.next=3,(0,s.getTextImg)(n.data);case 3:a=t.sent,2e4===a.code?(i+=1,null!=a.data&&(1!=a.data[0].status?(r=a.data[0].result_list[0].videoQualityInfo,e.markArr=[{name:"压缩程度",num:r.compressiveStrength},{name:"噪声程度",num:r.noiseIntensity},{name:"模糊程度",num:r.blurriness},{name:"对比度",num:r.colorContrast},{name:"饱和度",num:r.colorSaturation},{name:"亮度",num:r.luminance},{name:"颜色丰富度",num:r.colorfulness},{name:"表示主观质量评分",num:r.mosScore}],clearInterval(c),uni.hideLoading()):(clearInterval(c),that.$api.msg("生成评分失败，稍后重试"),uni.hideLoading()))):40022==a.code?(clearInterval(c),uni.hideLoading(),uni.showModal({content:a.msg,confirmText:"购买算力",success:function(e){e.confirm?(uni.navigateTo({url:"/pages/user/vip/vip"}),uni.hideLoading()):e.cancel&&(console.log("用户点击取消"),uni.hideLoading())}})):(clearInterval(c),e.active=0,e.$api.msg(a.msg),uni.hideLoading()),t.next=9;break;case 7:e.$api.msg("请到历史记录查询"),uni.hideLoading();case 9:case"end":return t.stop()}}),t)}))),2e3)):(e.$api.msg(n.msg),uni.hideLoading()),t.next=13;break;case 9:t.prev=9,t.t0=t["catch"](2),console.log(t.t0,6666666666666666),uni.hideLoading();case 13:case"end":return t.stop()}}),t,null,[[2,9]])})))()},savePhoto:function(e){uni.showLoading({mask:!0,title:"下载中..."}),uni.downloadFile({url:e,success:function(e){if(200===e.statusCode){var t=document.createElement("a");t.download="",t.href=e.tempFilePath,document.body.appendChild(t),t.click(),t.remove(),uni.hideLoading()}else uni.hideLoading()},fail:function(e){console.log(e),uni.hideLoading()}})},previewImage:function(){uni.previewImage({urls:[this.src],current:this.src,loop:!0})},copyText:function(e){var t=e.flatMap((function(e){return Object.values(e)})),a=JSON.stringify.apply(JSON,(0,i.default)(t));console.log(t,a,"content"),wx.setClipboardData({data:a,success:function(){uni.showToast({title:"复制成功"})}})},historyText:function(){uni.navigateTo({url:"/childCont/chest/history_chest?chat_type=46"})},toSlove:function(){var t=this;uni.chooseImage({count:1,mediaType:["image"],sourceType:["album","camera"],maxDuration:30,camera:"back",success:function(a){var n=a.tempFilePaths[0],i=a.tempFiles[0].name.substring(a.tempFiles[0].name.lastIndexOf(".")+1),o=a.tempFiles[0].size;o>3145728?t.$api.msg("该文件已超过3M，不能上传"):"jpg"===i||"jpeg"===i||"png"===i||"bmp"===i?(uni.showLoading({title:"上传中"}),uni.uploadFile({url:e.loginUrl+"/api/user/oss_upload",filePath:n,name:"image",formData:{image:n,oss_dir:"static",cate:"create_character"},success:function(a){var n=JSON.parse(a.data);2e4==n.code?(t.src=e.baseImg+"/"+n.data.new_url,t.origin_image=n.data.new_url,t.active=0,uni.hideLoading()):(t.$api.msg(n.msg),uni.hideLoading())}})):t.$api.msg("只允许上传 .jpg、.png、.jpeg、.bmp格式的图片")}})},toIdea:function(){uni.navigateTo({url:"/childPage/answer/answer"})}}};t.default=c}).call(this,a("c8ba"))},"5db7":function(e,t,a){"use strict";var n=a("23e7"),i=a("a2bf"),o=a("59ed"),r=a("7b0b"),s=a("07fa"),c=a("65f0");n({target:"Array",proto:!0},{flatMap:function(e){var t,a=r(this),n=s(a);return o(e),t=c(a,0),t.length=i(t,a,a,n,0,1,e,arguments.length>1?arguments[1]:void 0),t}})},6005:function(e,t,a){"use strict";a("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(Array.isArray(e))return(0,n.default)(e)};var n=function(e){return e&&e.__esModule?e:{default:e}}(a("6b75"))},"73d9":function(e,t,a){var n=a("44d2");n("flatMap")},8852:function(e,t,a){var n=a("afe2");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=a("4f06").default;i("779b5738",n,!0,{sourceMap:!1,shadowMode:!1})},a2bf:function(e,t,a){"use strict";var n=a("e8b5"),i=a("07fa"),o=a("3511"),r=a("0366"),s=function(e,t,a,c,u,l,d,f){var g,m,v=u,h=0,p=!!d&&r(d,f);while(h<c)h in a&&(g=p?p(a[h],h,t):a[h],l>0&&n(g)?(m=i(g),v=s(e,t,g,m,v,l-1)-1):(o(v+1),e[v]=g),v++),h++;return v};e.exports=s},a90a:function(e,t,a){"use strict";var n=a("8852"),i=a.n(n);i.a},afe2:function(e,t,a){var n=a("24fb");t=n(!1),t.push([e.i,'.bigBox[data-v-34eb1086]{position:relative;text-align:center;width:100%;height:%?512?%;background:#000;padding:%?32?% 0}.bigBox .bigImg[data-v-34eb1086]{height:%?512?%;width:100%}.bigBox .downImg[data-v-34eb1086]{width:%?55?%;height:%?55?%;position:absolute;top:%?-4?%;right:%?4?%}.bigBox .upImg[data-v-34eb1086]{width:%?55?%;height:%?55?%;position:absolute;bottom:%?95?%;right:%?20?%}.bottom[data-v-34eb1086]{padding:%?32?%;padding-bottom:%?220?%}.bottom .bot_head[data-v-34eb1086]{display:flex;justify-content:space-between}.bottom .bot_head .head_l[data-v-34eb1086]{color:#000;font-size:%?32?%;font-weight:500;line-height:150%\n  /* 24px */}.bottom .bot_head .head_r[data-v-34eb1086]{color:#1f64ff;font-size:%?26?%;font-weight:400;line-height:150%\n  /* 19.5px */}.bottom .item[data-v-34eb1086]{display:flex;justify-content:space-between;margin-top:%?24?%}.bottom .item .item_l[data-v-34eb1086]{color:#a4a4a4;font-size:%?28?%;line-height:150%\n  /* 21px */}.bottom .item .item_r[data-v-34eb1086]{color:#000;font-size:%?28?%;line-height:150%\n  /* 21px */}.slider[data-v-34eb1086]{width:80%;margin-top:%?40?%;margin-left:%?80?%}.activeColor[data-v-34eb1086]{color:"#1F64FF";z-index:999}.footer[data-v-34eb1086]{position:fixed;bottom:%?30?%;display:flex;align-items:center;justify-content:center;flex-direction:column;width:100%;background-color:#fff}.footer .text[data-v-34eb1086]{font-size:%?30?%;color:#333;line-height:%?50?%}.footer .record[data-v-34eb1086]{font-size:%?26?%;color:#0e39de;width:80%;text-align:right;line-height:%?50?%}.footer .btn[data-v-34eb1086]{width:80%;height:%?75?%;line-height:%?75?%}.tips[data-v-34eb1086]{padding:%?10?% %?39?%;display:flex;align-items:center;justify-content:center;width:91%;margin-bottom:%?20?%;margin-top:%?60?%}.tip_m[data-v-34eb1086]{flex:1;color:#999;font-size:%?24?%}',""]),e.exports=t},baa5:function(e,t,a){var n=a("23e7"),i=a("e58c");n({target:"Array",proto:!0,forced:i!==[].lastIndexOf},{lastIndexOf:i})},f1b3:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){}));var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticStyle:{"background-color":"#FEFEFE",height:"100vh"}},[a("v-uni-view",{staticClass:"bigBox"},[a("v-uni-video",{staticClass:"bigImg",attrs:{src:e.src}}),a("v-uni-image",{staticClass:"downImg",attrs:{src:e.icon_img1,mode:""},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.savePhoto(e.src)}}})],1),a("v-uni-view",{staticClass:"tips"},[a("v-uni-text",{staticClass:"tip_m"},[e._v("Tips:上传视频，对视频的整体质量、画质清晰度、颜色质量等进行客观评分")])],1),a("v-uni-view",{staticClass:"bottom"},[a("v-uni-view",{staticClass:"bot_head"},[a("v-uni-view",{staticClass:"head_l"},[e._v("评分结果")])],1),a("v-uni-view",e._l(e.markArr,(function(t,n){return e.markArr.length>0?a("v-uni-view",{key:n,staticClass:"item"},[a("v-uni-view",{staticClass:"item_l"},[e._v(e._s(t.name))]),a("v-uni-view",{staticClass:"item_r"},[e._v(e._s(100*t.num))])],1):e._e()})),1)],1),a("v-uni-view",{staticClass:"footer"},[a("v-uni-view",{staticClass:"text"},[e._v("本次生成将消耗24w算力/分钟")]),a("v-uni-view",{staticClass:"record",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.historyText.apply(void 0,arguments)}}},[e._v("历史记录")]),a("v-uni-button",{staticClass:"btn",staticStyle:{"background-color":"#1F64FF",color:"#fff"},attrs:{size:"default",type:"default"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.toSlove.apply(void 0,arguments)}}},[e._v("上传视频")])],1)],1)},i=[]}}]);