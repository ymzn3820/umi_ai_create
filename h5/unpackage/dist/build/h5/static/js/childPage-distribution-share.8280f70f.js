(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["childPage-distribution-share"],{"01f7":function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,".container[data-v-397f7ff8]{height:100vh;background-size:100% 100%;z-index:98}.back_li[data-v-397f7ff8]{width:100vw;height:100vh;background:#fff;z-index:10}.btn[data-v-397f7ff8]{position:fixed;bottom:%?40?%;width:100%;z-index:9999}.btn .btn_cont[data-v-397f7ff8]{display:flex;width:100%}.btn .btn_cont .btn_l[data-v-397f7ff8]{width:50%;display:flex;align-items:center;justify-content:center}.btn .btn_cont .btn_l .btn_img[data-v-397f7ff8]{width:70%;height:%?70?%}.placard_swiper[data-v-397f7ff8]{display:flex;justify-content:center;margin-top:%?10?%}.placard_swiper .img[data-v-397f7ff8]{border-radius:5%;width:%?140?%;margin:%?10?%}.tip[data-v-397f7ff8]{width:100vw;height:100vh;padding:%?25?%}.tip .tip_title[data-v-397f7ff8]{width:100%;font-size:%?30?%;color:#000;line-height:%?50?%;font-weight:550;text-align:center}.tip .tip_text[data-v-397f7ff8]{width:100%;font-size:%?26?%;color:#333;line-height:%?50?%;font-weight:500}.tip .tip_btn[data-v-397f7ff8]{width:100%;position:fixed;bottom:%?50?%;display:flex;align-items:center;justify-content:center}.tip .tip_btn .btn_left[data-v-397f7ff8]{font-size:%?28?%;color:#999;border:%?1?% solid #999;padding:%?15?% %?50?%;line-height:%?40?%;text-align:center;margin:0 %?50?%;border-radius:%?8?%}.tip .tip_btn .btn_right[data-v-397f7ff8]{font-size:%?28?%;color:#fff;background:#1f64ff;padding:%?15?% %?50?%;line-height:%?40?%;text-align:center;border-radius:%?8?%;margin:0 %?50?%}",""]),t.exports=e},4768:function(t,e,i){var n=i("01f7");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("35ce528d",n,!0,{sourceMap:!1,shadowMode:!1})},"5f3d":function(t,e,i){"use strict";i.r(e);var n=i("a66f"),a=i.n(n);for(var s in n)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(s);e["default"]=a.a},"7a8c":function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){}));var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:!t.isTip,expression:"!isTip"}]},[i("v-uni-view",{staticStyle:{position:"fixed",top:"0","z-index":"11",width:"100%"}},[i("v-uni-view",[i("v-uni-image",{staticStyle:{width:"68%",margin:"20upx 126upx","border-radius":"5%"},attrs:{"show-menu-by-longpress":!0,mode:"widthFix",src:t.pageData.post_img}})],1),i("v-uni-view",{staticStyle:{"text-align":"center","font-size":"24upx"}},[t._v("长按上方图片保存，分享给朋友")]),i("v-uni-view",{staticClass:"placard_swiper"},t._l(t.thumbnailList,(function(e,n){return i("v-uni-image",{key:n,staticClass:"img",attrs:{mode:"widthFix",src:e,alt:""},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.changeCurrent(n)}}})})),1)],1),i("v-uni-view",{staticStyle:{position:"fixed",top:"0","z-index":"10",width:"100vw",height:"100vh",background:"#fff"}}),i("v-uni-view",{staticStyle:{position:"fixed",top:"0","z-index":"9"}},[i("v-uni-canvas",{staticClass:"canvas",style:{height:t.canvasHeight+"px",width:t.canvasWidth+"px"},attrs:{"canvas-id":"shareCanvas",bindlongpress:"saveImg",catchtouchmove:"true"}})],1)],1)],1)},a=[]},"8f5d":function(t,e,i){"use strict";var n=i("4768"),a=i.n(n);a.a},a66f:function(t,e,i){"use strict";(function(t){i("7a82");var n=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("d3b7"),i("3ca3"),i("ddb0");var a=i("2d63"),s=(n(i("53d4")),{data:function(){return{isTip:!0,codeImg:"",info_img:"",leftImg:t.baseImg+"/xcx/aecc1078-f862-4c10-915b-61c1a4fcf564.jpg",rightImg:t.baseImg+"/xcx/5d998f97-6934-413f-b70a-fd55534ae73f.jpg",userInfo:"",pageData:{post_img:"",codePng:null},ctx:null,windowObj:{},canvasHeight:0,canvasWidth:0,isShow:!0,img_link:"",current:2,swiperList:[{backImg:t.baseImg+"/xcx/com/message_center/%E6%B5%B7%E6%8A%A5.png",backImg_guess:t.baseImg+"/xcx/com/message_center/%E6%B5%B7%E6%8A%A5.png"},{backImg:t.baseImg+"/xcx/com/message_center/%E6%B5%B7%E6%8A%A52.png",backImg_guess:t.baseImg+"/xcx/com/message_center/%E6%B5%B7%E6%8A%A52.png"},{backImg:t.baseImg+"/xcx/com/message_center/%E6%B5%B7%E6%8A%A53.png",backImg_guess:t.baseImg+"/xcx/com/message_center/%E6%B5%B7%E6%8A%A53.png"}],thumbnailList:[t.baseImg+"/xcx/com/message_center/mini%E6%B5%B7%E6%8A%A51.png",t.baseImg+"/xcx/com/message_center/mini%E6%B5%B7%E6%8A%A52.png",t.baseImg+"/xcx/com/message_center/mini%E6%B5%B7%E6%8A%A53.png"]}},components:{},onLoad:function(){this.userInfo=JSON.parse(uni.getStorageSync("memberInfo"));var e=uni.getStorageSync("qrCode");this.codeImg=t.baseImg+"/"+e;var i=uni.getStorageSync("avatarUrl");this.info_img=t.baseImg+"/"+i,this.getQrCode()},onShow:function(){this.checkShare()},onReady:function(){this.ctx=wx.createCanvasContext("shareCanvas")},methods:{changeCurrent:function(t){this.current=t,this.exportPost()},getQrCode:function(){var t=this;(0,a.getQrCode)({q_type:"2"}).then((function(e){2e4==e.code&&(t.img_link=e.data)})).catch((function(t){}))},getImageInfo:function(t){return new Promise((function(e,i){uni.getImageInfo({src:t,success:function(t){return e(t)},fail:function(t){return i(t)}})}))},exportPost:function(){this.isShow=!0;var t=this;uni.showLoading({title:"推广海报生成中"}),uni.getSystemInfo({success:function(e){t.windowObj=e,t.canvasWidth=t.windowObj.windowWidth,t.canvasHeight=t.windowObj.windowHeight;var i="";i="user"==t.userInfo.role?t.swiperList[t.current].backImg:t.swiperList[t.current].backImg_guess;var n=t.codeImg,a=t.info_img;Promise.all([t.getImageInfo(i),t.getImageInfo(n),t.getImageInfo(a)]).then((function(e){var i=t.canvasWidth-100,n=30,a=t.canvasHeight-100;n="user"==t.userInfo.role?t.canvasHeight-135:.85*t.canvasHeight-65,t.ctx.drawImage(e[0].path,0,0,t.canvasWidth,t.canvasHeight),t.ctx.drawImage(e[1].path,i,n,78.5,78.5),t.ctx.drawImage(e[2].path,20,a,60,60),t.ctx.fillStyle="#fff",t.ctx.setFontSize(15),t.ctx.fillText("我是用户".concat(t.userInfo.nick_name),90,t.canvasHeight-80),t.ctx.fillStyle="rgba(255, 255, 255, 0.80)",t.ctx.setFontSize(12),t.ctx.fillText("我为无忧秘书智脑代言",90,t.canvasHeight-55),t.ctx.setFontSize(11),t.ctx.fillText("长按识别二维码",i,t.canvasHeight-35),t.ctx.setFontSize(11),t.ctx.fillText("即刻体验",i+20,t.canvasHeight-15),t.ctx.draw(!0,setTimeout((function(){uni.canvasToTempFilePath({x:0,y:0,width:t.windowObj.windowWidth,height:t.windowObj.windowHeight,destWidth:2*t.windowObj.windowWidth,destHeight:2*t.windowObj.windowHeight,canvasId:"shareCanvas",fileType:"jpg",success:function(e){uni.hideLoading(),t.pageData.post_img=e.tempFilePath,t.isShow=!1,t.$forceUpdate()},fail:function(t){console.log(t)}})}),500))}))}})},savePhoto:function(){uni.showLoading({title:"正在保存..."}),uni.saveImageToPhotosAlbum({filePath:this.pageData.post_img,success:function(){uni.hideLoading(),setTimeout((function(){uni.showToast({title:"保存成功",duration:2e3})}),500)}})},copyLink:function(){var t="「无忧秘书智脑」是一个AI人工智能平台，点开链接直接打开快来参与吧！"+this.img_link;uni.setClipboardData({data:t,success:function(){uni.showToast({title:"复制成功",duration:2e3})}})},getImgUrl:function(e){return t.baseImg+"/"+e},backInfo:function(){uni.switchTab({url:"/pages/user/user"})},checkShare:function(){this.isTip=!1,this.exportPost()}}});e.default=s}).call(this,i("c8ba"))},f075:function(t,e,i){"use strict";i.r(e);var n=i("7a8c"),a=i("5f3d");for(var s in a)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(s);i("8f5d");var o=i("f0c5"),c=Object(o["a"])(a["default"],n["b"],n["c"],!1,null,"397f7ff8",null,!1,n["a"],void 0);e["default"]=c.exports}}]);