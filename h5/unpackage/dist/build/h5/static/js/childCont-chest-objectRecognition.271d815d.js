(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["childCont-chest-objectRecognition"],{"16c8":function(t,e,i){"use strict";i.r(e);var a=i("ba05"),s=i("95cc");for(var n in s)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return s[t]}))}(n);i("7857");var o=i("f0c5"),c=Object(o["a"])(s["default"],a["b"],a["c"],!1,null,"c9902c54",null,!1,a["a"],void 0);e["default"]=c.exports},2567:function(t,e,i){"use strict";(function(t){i("7a82");var a=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=a(i("c7eb")),n=a(i("1da1"));i("d3b7"),i("159b"),i("4ec9"),i("3ca3"),i("ddb0"),i("baa5");var o=i("2d63"),c={data:function(){return{ideaImg:t.baseImg+"/xcx/com/message_center/%E6%84%8F%E8%A7%81%E5%8F%8D%E9%A6%88.png",active:0,blur:0,src:t.baseImg+"/xcx/com/message_center/wtst.png",origin_image:"/xcx/com/message_center/wtst.png",icon_img:t.baseImg+"/xcx/com/message_center/Frame%20427320251.png",icon_img1:t.baseImg+"/xcx/com/message_center/Frame%20427319637.png",default:t.baseImg+"/xcx/com/message_center/%E7%BE%8E%E5%A5%B31.png",defaultSrc:t.baseImg+"/xcx/com/message_center/默认.png",clearSrc:t.baseImg+"/xcx/com/message_center/物体识图.png",getList:[]}},onShow:function(){""!=uni.getStorageSync("vison_code")&&this.historySession(uni.getStorageSync("vison_code"))},methods:{historySession:function(e){var i=this;(0,o.getImgDetail)(e).then((function(e){if(2e4==e.code){var a=e.data;a.forEach((function(e,s){s==a.length-2&&("hkcartoon"==e.style&&(i.active=2),"jpcartoon"==e.style&&(i.active=1)),s==a.length-1&&(i.src=t.baseImg+"/"+e.result_image)})),uni.setStorageSync("vison_code","")}else i.$api.msg(e.msg)})).catch((function(t){i.$api.msg("获取历史记录失败！")}))},mergeChange:function(e){var i=this;return(0,n.default)((0,s.default)().mark((function a(){var n,c,r;return(0,s.default)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(i.active=e,uni.showLoading({title:"生成中..."}),0===e?i.src=t.baseImg+"/"+i.origin_image:n={chat_type:"47",action_type:3,prompt:"物体识别",origin_image:i.origin_image},0===e){a.next=8;break}return a.next=6,(0,o.createImg)(n);case 6:c=a.sent,2e4==c.code?(r=new Map,r.set("human","人体"),r.set("sneakers","胶底运动鞋"),r.set("chair","椅子"),r.set("hat","帽子"),r.set("lamp","灯"),r.set("cabinet/shelf","橱柜/ 架子"),r.set("car","汽车"),r.set("glasses","眼镜"),r.set("picture/frame","照片/图画"),r.set("street lights","街灯"),r.set("helmet","头盔"),r.set("pillow","枕头"),r.set("glove","手套"),r.set("potted plant","盆栽植物"),r.set("flower","花"),r.set("monitor","显示屏"),r.set("plants pot/vase","花盆"),r.set("boots","靴子"),r.set("umbrella","伞"),r.set("boat","小船"),r.set("flag","旗帜"),r.set("speaker","扬声器/话筒"),r.set("trash bin/can","垃圾桶"),r.set("backpack"," 双肩背包"),r.set("sofa","沙发"),r.set("belt","腰带"),r.set("carpet","地毯"),r.set("coffee table","咖啡桌/茶几"),r.set("tie","领带"),r.set("bed","床"),r.set("traffic light","红绿灯"),r.set("necklace","项链"),r.set("mirror","镜子"),r.set("bicycle","自行车"),r.set("watch","手表"),r.set("horse","马"),r.set("traffic sign","交通标志"),r.set("stuffed animal","填充玩具动物"),r.set("motorbike/motorcycle","摩托车"),r.set("wild bird","鸟"),r.set("laptop","笔记本电脑"),r.set("cow","奶牛"),r.set("clock","时钟"),r.set("bus","公共汽车"),r.set("nightstand","床头柜"),r.set("sheep","绵羊"),r.set("traffic cone","锥形交通路标"),r.set("keyboard","键盘"),r.set("hockey stick","曲棍球球棍"),r.set("fan","电扇"),r.set("dog","狗"),r.set("blackboard/whiteboard","白板/黑板"),r.set("mouse","鼠标"),r.set("telephone","电话"),r.set("airplane","飞机"),r.set("skis","滑雪板"),r.set("soccer","英式足球"),r.set("combine with glove","棒球手套"),r.set("train","火车"),r.set("tent","帐篷"),r.set("sailboat","帆船"),r.set("kite","风筝"),r.set("computer box","计算机主机机箱"),r.set("elephant","大象"),r.set("stroller","折叠式婴儿车"),r.set("baseball bat","棒球棒"),r.set("skateboard","溜冰板"),r.set("surfboard","冲浪板"),r.set("cat","猫"),r.set("zebra","斑马"),r.set("sports car","跑车"),r.set("giraffe","长颈鹿"),r.set("radiator","散热器"),r.set("tennis racket","网球拍"),r.set("skating and skiing shoes","溜冰鞋"),r.set("baseball","棒球"),r.set("american football","美式橄榄球"),r.set("basketball","篮球"),r.set("printer","打印机"),r.set("fire hydrant","消防栓"),r.set("projector","投影仪"),r.set("fire extinguisher","灭火器"),r.set("tennis ball","网球"),r.set("frisbee","飞盘"),r.set("fire truck","消防车"),r.set("helicopter","直升飞机"),r.set("carriage","四轮马车"),r.set("bear","熊"),r.set("globe","地球仪"),r.set("volleyball","排球"),i.getList=c.data.results[0].result_list,i.getList.forEach((function(t){return t.type=r.get(t.type)})),console.log(i.getList,"this.getList")):40022==c.code?uni.showModal({content:c.msg,confirmText:"购买算力",success:function(t){t.confirm?uni.navigateTo({url:"/pages/user/vip/vip"}):t.cancel&&console.log("用户点击取消")}}):(i.active=0,i.$api.msg(c.msg));case 8:uni.hideLoading();case 9:case"end":return a.stop()}}),a)})))()},savePhoto:function(t){uni.showLoading({mask:!0,title:"下载中..."}),uni.downloadFile({url:t,success:function(t){if(200===t.statusCode){var e=document.createElement("a");e.download="",e.href=t.tempFilePath,document.body.appendChild(e),e.click(),e.remove(),uni.hideLoading()}else uni.hideLoading()},fail:function(t){console.log(t),uni.hideLoading()}})},previewImage:function(){uni.previewImage({urls:[this.src],current:this.src,loop:!0})},historyText:function(){uni.navigateTo({url:"/childCont/chest/history_chest?chat_type=47"})},toSlove:function(){var e=this;uni.chooseImage({count:1,mediaType:["image"],sourceType:["album","camera"],maxDuration:30,camera:"back",success:function(i){var a=i.tempFilePaths[0],s=i.tempFiles[0].name.substring(i.tempFiles[0].name.lastIndexOf(".")+1),n=i.tempFiles[0].size;n>3145728?e.$api.msg("该文件已超过3M，不能上传"):"jpg"===s||"jpeg"===s||"png"===s||"bmp"===s?(uni.showLoading({title:"上传中"}),uni.uploadFile({url:t.loginUrl+"/api/user/oss_upload",filePath:a,name:"image",formData:{image:a,oss_dir:"static",cate:"create_character"},success:function(i){var a=JSON.parse(i.data);2e4==a.code?(e.src=t.baseImg+"/"+a.data.new_url,e.origin_image=a.data.new_url,e.active=0,uni.hideLoading()):(e.$api.msg(a.msg),uni.hideLoading())}})):e.$api.msg("只允许上传 .jpg、.png、.jpeg、.bmp格式的图片")}})},toIdea:function(){uni.navigateTo({url:"/childPage/answer/answer"})}}};e.default=c}).call(this,i("c8ba"))},"550d":function(t,e,i){var a=i("adf1");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var s=i("4f06").default;s("010b5f16",a,!0,{sourceMap:!1,shadowMode:!1})},7857:function(t,e,i){"use strict";var a=i("550d"),s=i.n(a);s.a},"95cc":function(t,e,i){"use strict";i.r(e);var a=i("2567"),s=i.n(a);for(var n in a)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(n);e["default"]=s.a},adf1:function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,'.bigBox[data-v-c9902c54]{position:relative;text-align:center;width:100%;height:%?512?%;background:#000;padding:%?32?% 0}.bigBox .bigImg[data-v-c9902c54]{height:%?512?%;width:100%}.bigBox .downImg[data-v-c9902c54]{width:%?55?%;height:%?55?%;position:absolute;bottom:%?40?%;right:%?20?%}.bigBox .upImg[data-v-c9902c54]{width:%?55?%;height:%?55?%;position:absolute;bottom:%?125?%;right:%?20?%}.slider[data-v-c9902c54]{width:80%;margin-top:%?40?%;margin-left:%?80?%}.bottom[data-v-c9902c54]{display:flex;color:"#86909C";font-size:%?24?%;margin-left:%?40?%;margin-top:%?50?%}.bottom .item[data-v-c9902c54]{margin-right:%?32?%;text-align:center}.bottom .item img[data-v-c9902c54]{width:%?134?%;height:%?134?%;border-radius:%?8?%;border:%?1?% solid #f3f3f3}.bottom .item .btn_content[data-v-c9902c54]{color:#888f9b;font-size:%?24?%}.bottom .active_item[data-v-c9902c54]{margin-right:%?32?%;text-align:center}.bottom .active_item img[data-v-c9902c54]{width:%?134?%;height:%?134?%;border-radius:%?8?%;border:%?1?% solid #1f64ff}.bottom .active_item .btn_content[data-v-c9902c54]{color:#1f64ff;font-size:%?24?%}.bottom .clearItem[data-v-c9902c54]{margin-right:%?32?%;text-align:center}.bottom .clearItem img[data-v-c9902c54]{width:%?310?%;height:%?134?%;border-radius:%?8?%;border:%?1?% solid #f3f3f3}.bottom .clearItem .btn_content[data-v-c9902c54]{color:#888f9b;font-size:%?24?%}.bottom .activeClearItem[data-v-c9902c54]{margin-right:%?32?%;text-align:center}.bottom .activeClearItem img[data-v-c9902c54]{width:%?310?%;height:%?134?%;border-radius:%?8?%;border:%?1?% solid #1f64ff}.bottom .activeClearItem .btn_content[data-v-c9902c54]{color:#1f64ff;font-size:%?24?%}.activeColor[data-v-c9902c54]{color:"#1F64FF";z-index:999}.footer[data-v-c9902c54]{position:fixed;bottom:%?0?%;display:flex;align-items:center;justify-content:center;flex-direction:column;width:100%;padding-bottom:%?30?%;background-color:#fff}.footer .text[data-v-c9902c54]{font-size:%?30?%;color:#333;line-height:%?50?%}.footer .record[data-v-c9902c54]{font-size:%?26?%;color:#0e39de;width:80%;text-align:right;line-height:%?50?%}.footer .btn[data-v-c9902c54]{width:80%;height:%?75?%;line-height:%?75?%}.der_setting[data-v-c9902c54]{padding:%?32?% %?32?% %?210?% %?32?%;margin-top:%?44?%;padding-bottom:%?220?%}.der_setting .bot_head[data-v-c9902c54]{display:flex;justify-content:space-between}.der_setting .bot_head .head_l[data-v-c9902c54]{color:#000;font-size:%?32?%;font-weight:500;line-height:150%\n  /* 24px */}.der_setting .bot_head .head_r[data-v-c9902c54]{color:#1f64ff;font-size:%?26?%;font-weight:400;line-height:150%\n  /* 19.5px */}.der_setting .item[data-v-c9902c54]{display:flex;justify-content:space-between;margin-top:%?24?%}.der_setting .item .item_l[data-v-c9902c54]{color:#a4a4a4;font-size:%?28?%;line-height:150%\n  /* 21px */}.der_setting .item .item_r[data-v-c9902c54]{color:#000;font-size:%?28?%;line-height:150%\n  /* 21px */}.tips[data-v-c9902c54]{padding:%?10?% %?39?%;display:flex;align-items:center;justify-content:center;width:91%;margin-bottom:%?20?%;margin-top:%?60?%}.tip_m[data-v-c9902c54]{flex:1;color:#999;font-size:%?24?%}',""]),t.exports=e},ba05:function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticStyle:{"background-color":"#FEFEFE"}},[i("v-uni-view",{staticClass:"bigBox"},[i("v-uni-image",{staticClass:"bigImg",attrs:{mode:"aspectFit",src:t.src}}),i("v-uni-image",{staticClass:"upImg",attrs:{src:t.icon_img,mode:"aspectFit"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.previewImage.apply(void 0,arguments)}}}),i("v-uni-image",{staticClass:"downImg",attrs:{src:t.icon_img1,mode:""},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.savePhoto(t.src)}}})],1),i("v-uni-view",{staticClass:"tips"},[i("v-uni-text",{staticClass:"tip_m"},[t._v("Tips:识别图片中包含的物体名称，获取百科信息。")])],1),i("v-uni-view",{staticClass:"bottom"},[i("v-uni-view",{class:0==t.active?"active_item":"item",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.mergeChange(0)}}},[i("img",{attrs:{src:t.defaultSrc,alt:""}}),i("v-uni-view",{staticClass:"btn_content"},[t._v("默认")])],1),i("v-uni-view",{class:1==t.active?"active_item":"item",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.mergeChange(1)}}},[i("img",{attrs:{src:t.clearSrc,alt:""}}),i("v-uni-view",{staticClass:"btn_content"},[t._v("识别物体")])],1)],1),""!=t.getList?i("v-uni-view",{staticClass:"der_setting"},[i("v-uni-view",{staticClass:"bot_head"},[i("v-uni-view",{staticClass:"head_l"},[t._v("调用结果")])],1),i("v-uni-view",t._l(t.getList,(function(e,a){return i("v-uni-view",{key:a,staticClass:"item"},[i("v-uni-view",{staticClass:"item_l"},[t._v(t._s(e.type))]),i("v-uni-view",{staticClass:"item_r"},[t._v(t._s((100*e.score).toFixed(1))+"%")])],1)})),1)],1):t._e(),i("v-uni-view",{staticClass:"footer"},[i("v-uni-view",{staticClass:"text"},[t._v("本次生成将消耗0.6w算力/次")]),i("v-uni-view",{staticClass:"record",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.historyText.apply(void 0,arguments)}}},[t._v("历史记录")]),i("v-uni-button",{staticClass:"btn",staticStyle:{"background-color":"#1F64FF",color:"#fff"},attrs:{size:"default",type:"default"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toSlove.apply(void 0,arguments)}}},[t._v("上传图片")])],1)],1)},s=[]},baa5:function(t,e,i){var a=i("23e7"),s=i("e58c");a({target:"Array",proto:!0,forced:s!==[].lastIndexOf},{lastIndexOf:s})}}]);