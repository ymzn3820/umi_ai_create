(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["childPage-voice-voice"],{"0e12":function(t,e,n){"use strict";(function(e){var r=n("7ec2").default,o=n("c973").default,i=n("970b").default,a=n("5bc3").default;n("d3b7"),n("d401"),n("25f0"),n("e9c4"),n("d9e2");var c=n("e441"),s=n("6658"),u=function(){function t(e){i(this,t),this._event=new s,this._config=e}return a(t,[{key:"defaultStartParams",value:function(){return{format:"pcm",sample_rate:16e3,enable_intermediate_result:!0,enable_punctuation_prediction:!0,enable_inverse_text_normalization:!0}}},{key:"on",value:function(t,e){this._event.on(t,e)}},{key:"start",value:function(){var t=o(r().mark((function t(e){var n,i=this;return r().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this._client=new c(this._config),this._taskid=this._client.uuid(),n={header:{message_id:this._client.uuid(),task_id:this._taskid,namespace:"SpeechTranscriber",name:"StartTranscription",appkey:this._config.appkey},payload:e,context:this._client.defaultContext()},t.abrupt("return",new Promise(function(){var t=o(r().mark((function t(e,o){return r().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i._client.start((function(t,n){if(!n){var r=t.toString(),o=JSON.parse(r);"TranscriptionStarted"===o.header.name?(i._event.emit("started",r),e(r)):"TranscriptionResultChanged"===o.header.name?i._event.emit("changed",r):"TranscriptionCompleted"===o.header.name?i._event.emit("TranscriptionCompleted",r):"SentenceBegin"===o.header.name?i._event.emit("begin",r):"SentenceEnd"===o.header.name?i._event.emit("end",r):"TaskFailed"===o.header.name&&(i._client.shutdown(),i._client=null,i._event.emit("TaskFailed",r),i._event.emit("failed",r))}}),(function(){i._event.emit("closed")}));case 3:i._client.send(JSON.stringify(n),!1),t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),o(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e,n){return t.apply(this,arguments)}}()));case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"close",value:function(){var t=o(r().mark((function t(n){var o,i=this;return r().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(null!=this._client){t.next=2;break}return t.abrupt("return",new Promise((function(t,n){e((function(){n("client is null")}))})));case 2:return o={header:{message_id:this._client.uuid(),task_id:this._taskid,namespace:"SpeechTranscriber",name:"StopTranscription",appkey:this._config.appkey},payload:n,context:this._client.defaultContext()},t.abrupt("return",new Promise((function(t,e){i._event.on("TranscriptionCompleted",(function(e){i._client&&(i._client.shutdown(),i._client=null),i._event.emit("completed",e),t(e)})),i._event.on("TaskFailed",(function(t){e(t)})),i._client.send(JSON.stringify(o),!1)})));case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"ctrl",value:function(t){if(null==this._client)throw new Error("client is null");var e={header:{message_id:this._client.uuid(),task_id:this._taskid,namespace:"SpeechTranscriber",name:"ControlTranscription",appkey:this._config.appkey},payload:t,context:this._client.defaultContext()};this._client.send(JSON.stringify(e),!1)}},{key:"shutdown",value:function(){null!=this._client&&this._client.shutdown()}},{key:"sendAudio",value:function(t){return null!=this._client&&(this._client.send(t,!0),!0)}}]),t}();t.exports=u}).call(this,n("fe07")["nextTick"])},1704:function(t,e,n){"use strict";n.r(e);var r=n("2278"),o=n.n(r);for(var i in r)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return r[t]}))}(i);e["default"]=o.a},"20f8":function(t,e,n){"use strict";var r=n("c1d8"),o=n.n(r);o.a},2278:function(t,e,n){"use strict";n("7a82");var r=n("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=r(n("ca22")),i={name:"u-modal",mixins:[uni.$u.mpMixin,uni.$u.mixin,o.default],data:function(){return{loading:!1}},watch:{show:function(t){t&&this.loading&&(this.loading=!1)}},methods:{confirmHandler:function(){this.asyncClose&&(this.loading=!0),this.$emit("confirm")},cancelHandler:function(){this.$emit("cancel")},clickHandler:function(){this.closeOnClickOverlay&&this.$emit("close")}}};e.default=i},"30c8":function(t,e,n){"use strict";n("7a82");var r=n("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=r(n("89ab")),i={name:"u-line",mixins:[uni.$u.mpMixin,uni.$u.mixin,o.default],computed:{lineStyle:function(){var t={};return t.margin=this.margin,"row"===this.direction?(t.borderBottomWidth="1px",t.borderBottomStyle=this.dashed?"dashed":"solid",t.width=uni.$u.addUnit(this.length),this.hairline&&(t.transform="scaleY(0.5)")):(t.borderLeftWidth="1px",t.borderLeftStyle=this.dashed?"dashed":"solid",t.height=uni.$u.addUnit(this.length),this.hairline&&(t.transform="scaleX(0.5)")),t.borderColor=this.color,uni.$u.deepMerge(t,uni.$u.addStyle(this.customStyle))}}};e.default=i},3523:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return r}));var r={uModal:n("3723").default,uInput:n("bed4").default},o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",[n("v-uni-view",{staticClass:"voice_cont"},[n("v-uni-view",{staticClass:"cont_top"},[n("v-uni-view",{staticClass:"top_left"},[n("v-uni-image",{staticClass:"icon_img",attrs:{src:t.stStart?t.blueImg:t.gradeImg}}),n("v-uni-text",{class:[t.stStart?"start_text":"end_text"]},[t._v(t._s(t.showRecordTime))])],1)],1),n("v-uni-view",{staticClass:"cont_ul"},[t.stStart||""!=t.stResult||0!=t.recordFiles.length?t._e():n("v-uni-view",{staticClass:"start_cont"},[n("v-uni-view",{staticClass:"tip"},[n("v-uni-text",{staticClass:"tip_text"},[t._v("点击下方")]),n("v-uni-image",{staticClass:"tip_img",attrs:{src:t.centerImg}}),n("v-uni-text",{staticClass:"tip_text"},[t._v("点击下方")])],1),n("v-uni-view",{staticClass:"tip"},[n("v-uni-text",{staticClass:"tip_text"},[t._v("靠近手机讲话，生成效果更佳哦")])],1)],1),t.recordFiles.length>0?n("v-uni-view",{staticClass:"list_ul"},t._l(t.recordFiles,(function(e,r){return n("v-uni-view",{key:r,staticClass:"ul_li"},[n("v-uni-view",{staticClass:"li_title"},[t._v(t._s(10*r)+" - "+t._s(10*(r+1))+" 分钟")]),n("v-uni-view",{staticClass:"li_cont"},[t._v(t._s(e.value))])],1)})),1):t._e(),""==t.stResult&&""==t.message||!t.stStart?t._e():n("v-uni-view",{staticClass:"record_cont"},[n("veiw",{staticClass:"record_ul"},[n("v-uni-view",{staticClass:"cont_title"},[n("v-uni-text",[t._v(t._s(t.messageTitle))]),n("v-uni-image",{staticClass:"icon_img",attrs:{src:t.editImg},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.showTitle=!0}}})],1),n("v-uni-view",{staticClass:"cont_text"},[n("v-uni-text",{staticClass:"text_l"},[t._v(t._s(t.stResult))]),n("v-uni-text",{staticClass:"text_r"},[t._v(t._s(t.message))])],1)],1)],1),t.stStart?t._e():n("v-uni-view",{staticClass:"btn"},[n("v-uni-view",{staticClass:"btn_cont"},[n("v-uni-view",{staticClass:"btn_text",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.readyGO.apply(void 0,arguments)}}},[n("v-uni-image",{staticClass:"btn_img",attrs:{src:t.startImg}})],1)],1)],1),t.stStart?n("v-uni-view",{staticClass:"btn"},[n("v-uni-view",{staticClass:"btn_cont"},[n("v-uni-view",{staticClass:"btn_text"}),t.pause_status?t._e():n("v-uni-view",{staticClass:"btn_text",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.breakRecord.apply(void 0,arguments)}}},[n("v-uni-image",{staticClass:"btn_img",attrs:{src:t.endImg}})],1),t.pause_status?n("v-uni-view",{staticClass:"btn_text",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.pauseRecord.apply(void 0,arguments)}}},[n("v-uni-image",{staticClass:"btn_img",attrs:{src:t.startImg}})],1):t._e(),n("v-uni-view",{staticClass:"btn_text",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.endRecord.apply(void 0,arguments)}}},[n("v-uni-image",{staticClass:"btn_img",attrs:{src:t.saveImg}})],1)],1)],1):t._e()],1)],1),n("u-modal",{attrs:{show:t.showTitle,confirmText:"确认",confirmColor:"#1F64FF;",showCancelButton:!0},on:{cancel:function(e){arguments[0]=e=t.$handleEvent(e),t.closeKey.apply(void 0,arguments)},confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.changeKey.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"key_cont"},[n("v-uni-view",{staticClass:"title"},[t._v("录音标题")]),n("u-input",{attrs:{customStyle:{padding:"8px",width:"100%"},inputAlign:"center",placeholder:"请输入标题",type:"text"},model:{value:t.messageTitle,callback:function(e){t.messageTitle=e},expression:"messageTitle"}})],1)],1)],1)},i=[]},3633:function(t,e,n){"use strict";n.r(e);var r=n("82ca"),o=n("f4eb");for(var i in o)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(i);n("c007");var a=n("f0c5"),c=Object(a["a"])(o["default"],r["b"],r["c"],!1,null,"2f0e5305",null,!1,r["a"],void 0);e["default"]=c.exports},3723:function(t,e,n){"use strict";n.r(e);var r=n("6480"),o=n("1704");for(var i in o)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(i);n("20f8");var a=n("f0c5"),c=Object(a["a"])(o["default"],r["b"],r["c"],!1,null,"86e4afd2",null,!1,r["a"],void 0);e["default"]=c.exports},"4cc8":function(t,e,n){n("99af"),n("d81d"),n("d401"),n("d3b7"),n("25f0");function r(t){return t<10?"0"+t:""+t}var o=function(t){return t=t.toString(),t[1]?t:"0".concat(t)};t.exports={formatTime:function(t){var e=t.getFullYear(),n=t.getMonth()+1,r=t.getDate(),i=t.getHours(),a=t.getMinutes(),c=t.getSeconds();return"".concat([e,n,r].map(o).join("_"),"_").concat([i,a,c].map(o).join("_"))},uploadToSaver:function(t){wx.uploadFile({url:"http://30.224.161.18:9110/res/upload",filePath:t,name:"file",success:function(e){wx.removeSavedFile({filePath:t,success:function(){console.log("remove ".concat(t," done"))},fail:function(){console.log("remove ".concat(t," failed"))}})}})},utctimestamp:function(){var t=new Date,e=t.getUTCFullYear(),n=r(t.getUTCMonth()+1),o=r(t.getUTCDate()),i=r(t.getUTCHours()),a=r(t.getUTCMinutes()),c=r(t.getUTCSeconds());return"".concat(e,"-").concat(n,"-").concat(o,"T").concat(i,":").concat(a,":").concat(c,"Z")},sleep:function(t){return new Promise((function(e){setTimeout(e,t)}))}}},"583b":function(t,e,n){var r=n("24fb");e=r(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */uni-view[data-v-2f0e5305], uni-scroll-view[data-v-2f0e5305], uni-swiper-item[data-v-2f0e5305]{display:flex;flex-direction:column;flex-shrink:0;flex-grow:0;flex-basis:auto;align-items:stretch;align-content:flex-start}.u-line[data-v-2f0e5305]{vertical-align:middle}',""]),t.exports=e},"5bc3":function(t,e,n){n("7a82");var r=n("a395");function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,r(o.key),o)}}t.exports=function(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t},t.exports.__esModule=!0,t.exports["default"]=t.exports},6480:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return r}));var r={uPopup:n("60a1").default,uLine:n("3633").default,uLoadingIcon:n("fda4").default},o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("u-popup",{attrs:{mode:"center",zoom:t.zoom,show:t.show,customStyle:{borderRadius:"6px",overflow:"hidden",marginTop:"-"+t.$u.addUnit(t.negativeTop)},closeOnClickOverlay:t.closeOnClickOverlay,safeAreaInsetBottom:!1,duration:400},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.clickHandler.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"u-modal",style:{width:t.$u.addUnit(t.width)}},[t.title?n("v-uni-text",{staticClass:"u-modal__title"},[t._v(t._s(t.title))]):t._e(),n("v-uni-view",{staticClass:"u-modal__content",style:{paddingTop:(t.title?12:25)+"px"}},[t._t("default",[n("v-uni-text",{staticClass:"u-modal__content__text"},[t._v(t._s(t.content))])])],2),t.$slots.confirmButton?n("v-uni-view",{staticClass:"u-modal__button-group--confirm-button"},[t._t("confirmButton")],2):[n("u-line"),n("v-uni-view",{staticClass:"u-modal__button-group",style:{flexDirection:t.buttonReverse?"row-reverse":"row"}},[t.showCancelButton?n("v-uni-view",{staticClass:"u-modal__button-group__wrapper u-modal__button-group__wrapper--cancel",class:[t.showCancelButton&&!t.showConfirmButton&&"u-modal__button-group__wrapper--only-cancel"],attrs:{"hover-stay-time":150,"hover-class":"u-modal__button-group__wrapper--hover"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.cancelHandler.apply(void 0,arguments)}}},[n("v-uni-text",{staticClass:"u-modal__button-group__wrapper__text",style:{color:t.cancelColor,"font-weight":"500","font-size":"17px"}},[t._v(t._s(t.cancelText))])],1):t._e(),t.showConfirmButton&&t.showCancelButton?n("u-line",{attrs:{direction:"column"}}):t._e(),t.showConfirmButton?n("v-uni-view",{staticClass:"u-modal__button-group__wrapper u-modal__button-group__wrapper--confirm",class:[!t.showCancelButton&&t.showConfirmButton&&"u-modal__button-group__wrapper--only-confirm"],attrs:{"hover-stay-time":150,"hover-class":"u-modal__button-group__wrapper--hover"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.confirmHandler.apply(void 0,arguments)}}},[t.loading?n("u-loading-icon"):n("v-uni-text",{staticClass:"u-modal__button-group__wrapper__text",style:{color:t.confirmColor,"font-weight":"500","font-size":"17px"}},[t._v(t._s(t.confirmText))])],1):t._e()],1)]],2)],1)},i=[]},6658:function(t,e,n){var r=n("970b").default,o=n("5bc3").default;n("14d9"),n("fb6a"),n("a434");var i=function(){"use strict";function t(){r(this,t)}return o(t,[{key:"on",value:function(t,e,n){"function"==typeof e?(this._stores=this._stores||{},(this._stores[t]=this._stores[t]||[]).push({cb:e,ctx:n})):console.error("fn must be a function")}},{key:"emit",value:function(t){this._stores=this._stores||{};var e,n=this._stores[t];if(n){n=n.slice(0),e=[].slice.call(arguments,1);for(var r=0,o=n.length;r<o;r++)n[r].cb.apply(n[r].ctx,e)}}},{key:"off",value:function(t,e){if(this._stores=this._stores||{},arguments.length){var n=this._stores[t];if(n)if(1!==arguments.length)for(var r=0,o=n.length;r<o;r++)e===n[r].cb&&n.splice(r,1);else delete this._stores[t]}else this._stores=[]}}]),t}();t.exports=i},"7ec2":function(t,e,n){n("7a82"),n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),n("b636"),n("944a"),n("0c47"),n("23dc"),n("3410"),n("d9e2"),n("d401"),n("14d9"),n("159b"),n("131a"),n("26e9"),n("fb6a");var r=n("7037")["default"];function o(){"use strict";
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */t.exports=o=function(){return e},t.exports.__esModule=!0,t.exports["default"]=t.exports;var e={},n=Object.prototype,i=n.hasOwnProperty,a=Object.defineProperty||function(t,e,n){t[e]=n.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function d(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{d({},"")}catch(E){d=function(t,e,n){return t[e]=n}}function f(t,e,n,r){var o=e&&e.prototype instanceof v?e:v,i=Object.create(o.prototype),c=new T(r||[]);return a(i,"_invoke",{value:O(t,n,c)}),i}function p(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(E){return{type:"throw",arg:E}}}e.wrap=f;var h={};function v(){}function m(){}function g(){}var _={};d(_,s,(function(){return this}));var b=Object.getPrototypeOf,x=b&&b(b(j([])));x&&x!==n&&i.call(x,s)&&(_=x);var w=g.prototype=v.prototype=Object.create(_);function y(t){["next","throw","return"].forEach((function(e){d(t,e,(function(t){return this._invoke(e,t)}))}))}function k(t,e){var n;a(this,"_invoke",{value:function(o,a){function c(){return new e((function(n,c){(function n(o,a,c,s){var u=p(t[o],t,a);if("throw"!==u.type){var l=u.arg,d=l.value;return d&&"object"==r(d)&&i.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,c,s)}),(function(t){n("throw",t,c,s)})):e.resolve(d).then((function(t){l.value=t,c(l)}),(function(t){return n("throw",t,c,s)}))}s(u.arg)})(o,a,n,c)}))}return n=n?n.then(c,c):c()}})}function O(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return R()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=C(a,n);if(c){if(c===h)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=p(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function C(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator["return"]&&(e.method="return",e.arg=void 0,C(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var o=p(r,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,h;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function $(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function j(t){if(t){var e=t[s];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function e(){for(;++n<t.length;)if(i.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return r.next=r}}return{next:R}}function R(){return{value:void 0,done:!0}}return m.prototype=g,a(w,"constructor",{value:g,configurable:!0}),a(g,"constructor",{value:m,configurable:!0}),m.displayName=d(g,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,d(t,l,"GeneratorFunction")),t.prototype=Object.create(w),t},e.awrap=function(t){return{__await:t}},y(k.prototype),d(k.prototype,u,(function(){return this})),e.AsyncIterator=k,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new k(f(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},y(w),d(w,l,"Generator"),d(w,s,(function(){return this})),d(w,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=j,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach($),!t)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var c=i.call(o,"catchLoc"),s=i.call(o,"finallyLoc");if(c&&s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),$(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;$(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:j(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},e}t.exports=o,t.exports.__esModule=!0,t.exports["default"]=t.exports},"82ca":function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){}));var r=function(){var t=this.$createElement,e=this._self._c||t;return e("v-uni-view",{staticClass:"u-line",style:[this.lineStyle]})},o=[]},8597:function(t,e){t.exports={uuid:function(t){for(var e=[],n=0;n<36;n++)e[n]="0123456789abcdef".substr(Math.floor(16*Math.random()),1);e[14]="4",e[19]="0123456789abcdef".substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-";var r=e.join("");return t?r.split("-").join(""):r}}},"89ab":function(t,e,n){"use strict";n("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("a9e3");var r={props:{color:{type:String,default:uni.$u.props.line.color},length:{type:[String,Number],default:uni.$u.props.line.length},direction:{type:String,default:uni.$u.props.line.direction},hairline:{type:Boolean,default:uni.$u.props.line.hairline},margin:{type:[String,Number],default:uni.$u.props.line.margin},dashed:{type:Boolean,default:uni.$u.props.line.dashed}}};e.default=r},"8b97":function(t,e,n){var r=n("583b");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);var o=n("4f06").default;o("07c28c9e",r,!0,{sourceMap:!1,shadowMode:!1})},"970b":function(t,e,n){n("d9e2"),n("d401"),t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports["default"]=t.exports},a0a2:function(t,e,n){var r=n("ca97");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);var o=n("4f06").default;o("1d3a20e8",r,!0,{sourceMap:!1,shadowMode:!1})},a395:function(t,e,n){var r=n("7037")["default"],o=n("e50d");t.exports=function(t){var e=o(t,"string");return"symbol"===r(e)?e:String(e)},t.exports.__esModule=!0,t.exports["default"]=t.exports},a79d1:function(t,e,n){"use strict";n.r(e);var r=n("3523"),o=n("a8da");for(var i in o)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(i);n("adbc");var a=n("f0c5"),c=Object(a["a"])(o["default"],r["b"],r["c"],!1,null,"0edc692c",null,!1,r["a"],void 0);e["default"]=c.exports},a8da:function(t,e,n){"use strict";n.r(e);var r=n("f59c"),o=n.n(r);for(var i in r)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return r[t]}))}(i);e["default"]=o.a},adbc:function(t,e,n){"use strict";var r=n("a0a2"),o=n.n(r);o.a},b2ae:function(t,e,n){var r=n("24fb");e=r(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */uni-view[data-v-86e4afd2], uni-scroll-view[data-v-86e4afd2], uni-swiper-item[data-v-86e4afd2]{display:flex;flex-direction:column;flex-shrink:0;flex-grow:0;flex-basis:auto;align-items:stretch;align-content:flex-start}.u-modal[data-v-86e4afd2]{width:%?650?%;border-radius:6px;overflow:hidden}.u-modal__title[data-v-86e4afd2]{font-size:17px;font-weight:700;color:#606266;text-align:center;padding-top:25px}.u-modal__content[data-v-86e4afd2]{padding:12px 25px 25px 25px;display:flex;flex-direction:row;justify-content:center}.u-modal__content__text[data-v-86e4afd2]{font-size:15px;color:#606266;flex:1}.u-modal__button-group[data-v-86e4afd2]{display:flex;flex-direction:row}.u-modal__button-group--confirm-button[data-v-86e4afd2]{flex-direction:column;padding:0 25px 15px 25px}.u-modal__button-group__wrapper[data-v-86e4afd2]{flex:1;display:flex;flex-direction:row;justify-content:center;align-items:center;height:48px}.u-modal__button-group__wrapper--confirm[data-v-86e4afd2], .u-modal__button-group__wrapper--only-cancel[data-v-86e4afd2]{border-bottom-right-radius:6px}.u-modal__button-group__wrapper--cancel[data-v-86e4afd2], .u-modal__button-group__wrapper--only-confirm[data-v-86e4afd2]{border-bottom-left-radius:6px}.u-modal__button-group__wrapper--hover[data-v-86e4afd2]{background-color:#f3f4f6}.u-modal__button-group__wrapper__text[data-v-86e4afd2]{color:#606266;font-size:17px;text-align:center}',""]),t.exports=e},baa5:function(t,e,n){var r=n("23e7"),o=n("e58c");r({target:"Array",proto:!0,forced:o!==[].lastIndexOf},{lastIndexOf:o})},c007:function(t,e,n){"use strict";var r=n("8b97"),o=n.n(r);o.a},c1d8:function(t,e,n){var r=n("b2ae");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);var o=n("4f06").default;o("3c2cb28b",r,!0,{sourceMap:!1,shadowMode:!1})},c973:function(t,e,n){function r(t,e,n,r,o,i,a){try{var c=t[i](a),s=c.value}catch(u){return void n(u)}c.done?e(s):Promise.resolve(s).then(r,o)}n("d3b7"),t.exports=function(t){return function(){var e=this,n=arguments;return new Promise((function(o,i){var a=t.apply(e,n);function c(t){r(a,o,i,c,s,"next",t)}function s(t){r(a,o,i,c,s,"throw",t)}c(void 0)}))}},t.exports.__esModule=!0,t.exports["default"]=t.exports},ca22:function(t,e,n){"use strict";n("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("a9e3");var r={props:{show:{type:Boolean,default:uni.$u.props.modal.show},title:{type:[String],default:uni.$u.props.modal.title},content:{type:String,default:uni.$u.props.modal.content},confirmText:{type:String,default:uni.$u.props.modal.confirmText},cancelText:{type:String,default:uni.$u.props.modal.cancelText},showConfirmButton:{type:Boolean,default:uni.$u.props.modal.showConfirmButton},showCancelButton:{type:Boolean,default:uni.$u.props.modal.showCancelButton},confirmColor:{type:String,default:uni.$u.props.modal.confirmColor},cancelColor:{type:String,default:uni.$u.props.modal.cancelColor},buttonReverse:{type:Boolean,default:uni.$u.props.modal.buttonReverse},zoom:{type:Boolean,default:uni.$u.props.modal.zoom},asyncClose:{type:Boolean,default:uni.$u.props.modal.asyncClose},closeOnClickOverlay:{type:Boolean,default:uni.$u.props.modal.closeOnClickOverlay},negativeTop:{type:[String,Number],default:uni.$u.props.modal.negativeTop},width:{type:[String,Number],default:uni.$u.props.modal.width},confirmButtonShape:{type:String,default:uni.$u.props.modal.confirmButtonShape}}};e.default=r},ca97:function(t,e,n){var r=n("24fb");e=r(!1),e.push([t.i,".voice_cont[data-v-0edc692c]{background:#fff;min-height:calc(100vh - %?200?%)}.voice_cont .cont_top[data-v-0edc692c]{display:flex;align-items:center;justify-content:space-between;padding:%?20?% %?15?%;border-bottom:%?1?% solid #f2f2f2;background:#fff;width:100%;position:fixed;top:0}.voice_cont .cont_top .top_left[data-v-0edc692c]{display:flex;align-items:center}.voice_cont .cont_top .top_left .icon_img[data-v-0edc692c]{width:%?34?%;height:%?20?%;margin-right:%?10?%}.voice_cont .cont_top .top_left .end_text[data-v-0edc692c]{color:#9d9fa5;font-size:%?28?%;font-style:normal;font-weight:500}.voice_cont .cont_top .top_right[data-v-0edc692c]{display:flex;align-items:center}.voice_cont .cont_top .top_right .history_text[data-v-0edc692c]{color:#1f64ff;font-size:%?26?%;font-style:normal;font-weight:500;margin-right:%?8?%}.voice_cont .start_cont[data-v-0edc692c]{flex:1;display:flex;align-items:center;justify-content:center;flex-direction:column;width:100%;height:70vh}.voice_cont .start_cont .tip[data-v-0edc692c]{display:flex;padding:%?8?% 0}.voice_cont .start_cont .tip .tip_text[data-v-0edc692c]{color:#8f8f93;font-size:%?28?%;font-style:normal;font-weight:400}.voice_cont .start_cont .tip .tip_img[data-v-0edc692c]{width:%?40?%;height:%?40?%;margin:0 %?8?%}.cont_ul[data-v-0edc692c]{padding-top:%?80?%;padding-bottom:%?200?%;background:#fff}.btn[data-v-0edc692c]{padding:0 %?20?% %?20?% %?20?%;background:#fff;position:fixed;bottom:0;width:100%}.btn .btn_cont[data-v-0edc692c]{border-radius:%?100?%;background:#fff;box-shadow:0 %?4?% %?20?% 0 rgba(51,51,51,.1);display:flex;align-items:center;justify-content:center;width:calc(100% - %?40?%);padding:%?15?% 0}.btn .btn_cont .btn_text[data-v-0edc692c]{flex:1;display:flex;align-items:center;justify-content:center}.btn .btn_cont .btn_text .btn_img[data-v-0edc692c]{width:%?100?%;height:%?100?%}.record_cont[data-v-0edc692c]{width:calc(100% - %?40?%);padding:%?20?%}.record_cont .record_ul[data-v-0edc692c]{width:calc(100% - %?40?%);background:#fff;border-radius:%?10?%;margin-top:%?140?%}.record_cont .cont_title[data-v-0edc692c]{color:#000;font-size:%?36?%;font-weight:500;padding:%?15?% 0}.record_cont .cont_title .icon_img[data-v-0edc692c]{width:%?42?%;height:%?42?%;margin-left:%?12?%}.record_cont .cont_text[data-v-0edc692c]{font-size:%?32?%;font-weight:400;line-height:%?60?%;margin-bottom:%?180?%}.record_cont .cont_text .text_l[data-v-0edc692c]{color:#272c3d}.record_cont .cont_text .text_r[data-v-0edc692c]{color:#999}.key_cont[data-v-0edc692c]{width:100%;background-color:#fff;border-radius:%?20?%;\n  /* padding: 0upx 0 0 0; */display:flex;flex-direction:column;align-items:center;justify-content:center}.key_cont .title[data-v-0edc692c]{font-weight:500;font-size:%?32?%;line-height:%?48?%;color:#333;margin-bottom:%?32?%}.list_ul[data-v-0edc692c]{width:100%;padding:%?20?%}.list_ul .ul_li[data-v-0edc692c]{width:calc(100% - %?40?%)}.list_ul .ul_li .li_title[data-v-0edc692c]{color:#999;text-align:center;font-size:%?24?%;font-style:normal;font-weight:500;line-height:%?60?%;text-align:left}.list_ul .ul_li .li_cont[data-v-0edc692c]{color:#fff;background:#1f64ff;text-align:center;font-size:%?26?%;font-style:normal;font-weight:400;line-height:%?50?%;border-radius:%?10?%;padding:%?10?%;text-align:left}",""]),t.exports=e},e441:function(t,e,n){"use strict";var r=n("970b").default,o=n("5bc3").default;n("d9e2"),n("d401"),n("d3b7");var i=n("8597").uuid,a=function(){function t(e){if(r(this,t),!e||!e.url||!e.appkey||!e.token)throw new Error("invalid config!");this._config=e}return o(t,[{key:"start",value:function(t,e){var n=this;if("function"!==typeof t)throw new Error("expect function onmessage");if("function"!=typeof e)throw new Error("expect function onclose");return this._ws=wx.connectSocket({url:this._config.url,tcpNoDelay:!0,header:{"X-NLS-Token":this._config.token}}),this._ws.onMessage((function(e){"string"===typeof e.data?t(e.data,!1):t(e.data,!0)})),this._ws.onClose((function(t,n){e(t,n)})),new Promise((function(t,e){n._ws.onOpen((function(e){t(e)})),n._ws.onError((function(t){e(t)}))}))}},{key:"send",value:function(t,e){null!=this._ws&&this._ws.send({data:t})}},{key:"uuid",value:function(){return i(!0)}},{key:"shutdown",value:function(){null!=this._ws&&this._ws.close()}},{key:"defaultContext",value:function(){return{sdk:{name:"nls-wx-sdk",version:"0.0.1",language:"wxjs"}}}}]),t}();t.exports=a},e50d:function(t,e,n){n("8172"),n("efec"),n("a4d3"),n("e01a"),n("d3b7"),n("d9e2"),n("d401"),n("a9e3");var r=n("7037")["default"];t.exports=function(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)},t.exports.__esModule=!0,t.exports["default"]=t.exports},f4eb:function(t,e,n){"use strict";n.r(e);var r=n("30c8"),o=n.n(r);for(var i in r)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return r[t]}))}(i);e["default"]=o.a},f59c:function(t,e,n){"use strict";(function(t){n("7a82");var r=n("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("e9c4"),n("14d9"),n("ac1f");var o=r(n("c7eb")),i=r(n("1da1")),a=n("2d63"),c=n("0e12"),s=n("4cc8").sleep,u={data:function(){return{message:"未开始识别语音",stResult:"",stStart:!1,pause_status:!1,showTitle:!1,recordFiles:[],recordTime:0,messageTitle:"",timer_li:0,token:"",startImg:t.baseImg+"/xcx/d3c43cc5-bb3e-4914-b2bd-5d305e2e9771.jpg",bfImg:t.baseImg+"/xcx/e47bc10b-bb4c-43a1-8d5a-1bda0b917003.jpg",centerImg:t.baseImg+"/xcx/32342a2a-00bd-41c9-a809-c3180ee64713.jpg",endImg:t.baseImg+"/xcx/90a9be00-0c42-440e-9ea9-267e52d7808b.jpg",gradeImg:t.baseImg+"/xcx/cb470639-4f41-4dc6-aa95-701d10b6d3ec.jpg",blueImg:t.baseImg+"/xcx/3a34e5c7-c73f-4193-afb7-adc7301b7dbd.jpg",saveImg:t.baseImg+"/xcx/720a629d-8e4a-4ea4-bcda-db4b2146252c.jpg",editImg:t.baseImg+"/xcx/4a6dcc63-9e07-448b-a088-1f98d9dcac54.jpg"}},computed:{showRecordTime:function(){var t=Math.floor(this.recordTime/1e3),e=Math.floor(t/3600);e<10&&(e="0"+e);var n=Math.floor(t%3600/60);n<10&&(n="0"+n);var r=t%60;return r<10&&(r="0"+r),e+":"+n+":"+r}},components:{},onLoad:function(){var t=(0,i.default)((0,o.default)().mark((function t(e){var n,r=this;return(0,o.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return wx.getRecorderManager().onFrameRecorded((function(t){console.log(r.st,5869),console.log(r.stStart,63214),t.isLastFrame&&console.log("record done"),r.st&&r.stStart&&(console.log("send "+t.frameBuffer.byteLength),r.st.sendAudio(t.frameBuffer))})),wx.getRecorderManager().onStart((function(){console.log("start recording...")})),wx.getRecorderManager().onStop((function(t){console.log(t,"stop recording..."),r.uploadVoice(t.tempFilePath)})),wx.getRecorderManager().onError((function(t){console.log("recording failed:"+t)})),t.prev=4,t.next=7,this.getRcordToken();case 7:t.next=13;break;case 9:return t.prev=9,t.t0=t["catch"](4),console.log("error on get token:",JSON.stringify(t.t0)),t.abrupt("return");case 13:console.log(this.token,8854),n=new c({url:"wss://nls-gateway.cn-shanghai.aliyuncs.com/ws/v1",appkey:"ccR3tWBwNilIBRKL",token:this.token}),n.on("started",(function(t){console.log("Client recv started")})),n.on("changed",(function(t){console.log("Client recv changed:",t);var e=JSON.parse(t);console.log(e,4158),"TranscriptionResultChanged"==e.header.name&&(r.message=e.payload.result,r.toBottom())})),n.on("completed",(function(t){console.log("Client recv completed:",t)})),n.on("begin",(function(t){console.log("Client recv sentenceBegin:",t);var e=JSON.parse(t);console.log(e,4158),"SentenceBegin"==e.header.name&&(r.message="")})),n.on("end",(function(t){console.log("Client recv sentenceEnd:",t);var e=JSON.parse(t);"SentenceEnd"==e.header.name&&(r.message="",r.stResult=r.stResult+e.payload.result+"\n",r.$forceUpdate())})),n.on("closed",(function(){console.log("Client recv closed"),r.stStart?console.log("出现close"):(clearInterval(r.timer_li),r.endRecord(),r.st?r.st.shutdown():console.log("st is null"))})),n.on("failed",(function(t){console.log("Client recv failed:",t);var e=JSON.parse(t);"40000004"==e.header.status&&r.stStart?(console.log("出现错误了"),clearInterval(r.timer_li),r.continueRecord()):(clearInterval(r.timer_li),r.endRecord(),r.st?r.st.shutdown():console.log("st is null"))})),this.st=n;case 20:case"end":return t.stop()}}),t,this,[[4,9]])})));return function(e){return t.apply(this,arguments)}}(),onShow:function(){wx.setKeepScreenOn({keepScreenOn:!0})},onHide:function(){""!=this.stResult&&(this.endRecord(),this.st?this.st.shutdown():console.log("st is null"))},onUnload:function(){""!=this.stResult&&(this.endRecord(),this.st?this.st.shutdown():console.log("st is null"))},methods:{getTime:function(){var t=new Date,e=t.getFullYear(),n=t.getMonth()+1,r=t.getDate(),o=n>9?n:"0"+n,i=r<10?"0"+r:r;this.messageTitle=e+"年"+o+"月"+i+"记录"},readyGO:function(){var t=this;return(0,i.default)((0,o.default)().mark((function e(){return(0,o.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:uni.authorize({scope:"scope.record",fail:function(){uni.showToast({icon:"none",title:"请在小程序设置中启用麦克风权限"})},success:function(){t.startRecord()}});case 1:case"end":return e.stop()}}),e)})))()},startRecord:function(){var t=(0,i.default)((0,o.default)().mark((function t(){var e,n;return(0,o.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.st){t.next=3;break}return console.log("st is null"),t.abrupt("return");case 3:if(!this.stStart){t.next=6;break}return console.log("st is started!"),t.abrupt("return");case 6:return e=this.st,n=this,t.prev=8,t.next=11,e.start(e.defaultStartParams());case 11:this.stStart=!0,this.getTime(),this.recordFiles=[],this.stResult="",this.recordTime=0,n.timer_li=setInterval((function(){n.stStart&&(n.recordTime+=1e3)}),1e3),console.log("录音开始"),t.next=24;break;case 20:return t.prev=20,t.t0=t["catch"](8),console.log("start failed:"+t.t0),t.abrupt("return");case 24:wx.getRecorderManager().start({duration:6e5,numberOfChannels:1,sampleRate:16e3,format:"PCM",frameSize:4});case 25:case"end":return t.stop()}}),t,this,[[8,20]])})));return function(){return t.apply(this,arguments)}}(),continueRecord:function(){var t=(0,i.default)((0,o.default)().mark((function t(){var e,n;return(0,o.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.st,n=this,t.prev=2,t.next=5,e.start(e.defaultStartParams());case 5:n.timer_li=setInterval((function(){n.stStart&&(n.recordTime+=1e3)}),1e3),console.log("录音继续"),t.next=13;break;case 9:return t.prev=9,t.t0=t["catch"](2),console.log("start failed:"+t.t0),t.abrupt("return");case 13:wx.getRecorderManager().start({duration:6e5,numberOfChannels:1,sampleRate:16e3,format:"PCM",frameSize:4});case 14:case"end":return t.stop()}}),t,this,[[2,9]])})));return function(){return t.apply(this,arguments)}}(),endRecord:function(){var t=(0,i.default)((0,o.default)().mark((function t(){return(0,o.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return wx.getRecorderManager().stop(),this.stStart=!1,t.next=4,s(500);case 4:if(!this.stStart||!this.st){t.next=16;break}return t.prev=5,console.log("prepare close st"),t.next=9,this.st.close();case 9:clearInterval(this.timer_li),t.next=16;break;case 12:t.prev=12,t.t0=t["catch"](5),clearInterval(this.timer_li),console.log("close st failed:"+t.t0);case 16:case"end":return t.stop()}}),t,this,[[5,12]])})));return function(){return t.apply(this,arguments)}}(),uploadVoice:function(e){this.testValue=e;var n=this;uni.uploadFile({url:t.loginUrl+"/api/user/oss_upload",filePath:e,name:"image",formData:{image:e,oss_dir:"static",cate:"create_character"},success:function(t){var e=JSON.parse(t.data);if(2e4==e.code){var r=e.data.new_url;n.saveRecord(r)}else n.$api.msg(e.msg)},fail:function(t){n.$api.msg("上传失败")}})},saveRecord:function(t){var e=this,n={title:this.messageTitle,audio_url:t,speech_text:this.stResult,r_status:2,r_type:1,biz_duration:this.recordTime/1e3,file_type:2};(0,a.saveRecord)(n).then((function(t){if(2e4==t.code){if(""!=e.stResult){var n={value:e.stResult};e.recordFiles.push(n),e.toBottom()}e.stStart?(e.recordTime=0,e.stResult="",clearInterval(e.timer_li),e.continueRecord(),e.$api.msg("当前录音保存成功")):(e.stResult="",e.recordTime=0,e.$api.msg("当前录音保存成功,可前往历史记录查看"),setTimeout((function(){uni.redirectTo({url:"/childPage/voice/voice_index"})}),1500))}else e.$api.msg(t.msg)})).catch((function(t){e.$api.msg("保存录音失败")}))},breakRecord:function(){wx.getRecorderManager().pause(),this.pause_status=!0,clearInterval(this.timer_li),console.log("录音暂停")},pauseRecord:function(){wx.getRecorderManager().resume();var t=this;if(t.stStart&&t.st)try{t.pause_status=!1,t.timer_li=setInterval((function(){t.stStart&&(t.recordTime+=1e3)}),1e3),console.log("录音继续")}catch(e){console.log("close st failed:"+e)}},getRcordToken:function(){var t=this;return(0,i.default)((0,o.default)().mark((function e(){return(0,o.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,a.getToken)().then((function(e){2e4==e.code?t.token=e.data.token:t.$api.msg(e.msg)})).catch((function(e){t.$api.msg("获取token失败")}));case 2:case"end":return e.stop()}}),e)})))()},closeKey:function(){this.messageTitle="",this.showTitle=!1},changeKey:function(){""!=this.messageTitle?this.showTitle=!1:this.$api.msg("标题不能为空")},toBottom:function(){this.$nextTick((function(){setTimeout((function(){uni.createSelectorQuery().select(".cont_ul").boundingClientRect((function(t){uni.pageScrollTo({scrollTop:t.height,duration:0})})).exec()}),1500)}))}}};e.default=u}).call(this,n("c8ba"))},fe07:function(t,e,n){"use strict";(function(t){var r=n("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.Behavior=function(t){return t},e.Component=function(e){var n=function(e){var n=e.data,r=e.options,o=e.methods,i=e.behaviors,a=e.lifetimes,c=e.observers,l=e.relations,d=e.properties,p=e.pageLifetimes,h=e.externalClasses,v={mixins:[],props:{},watch:{},mpOptions:{mpObservers:[]}};return u(v),s(n,v),function(t,e){if(!t)return;e.mpOptions.options=t}(r,v),O(o,v),j(i,v),function(t,e){if(!t)return;C(t,e)}(a,v),function(t,e){if(!t)return;var n=e.mpOptions.mpObservers;Object.keys(t).forEach((function(e){n.push({paths:R(e),observer:t[e]})}))}(c,v),function(e,n){if(!e)return;Object.keys(e).forEach((function(n){var r=e[n];r.name=n,r.target=r.target?String(r.target):function(t,e){0===e.indexOf("/")&&(t="");var n=t.split("/"),r=e.split("/");n.pop();while(r.length){var o=r.shift();""!==o&&"."!==o&&(".."!==o?n.push(o):n.pop())}return n.join("/")}(t.__wxRoute,n)})),n.mpOptions.relations=e}(l,v),k(d,v),function(t,e){if(!t)return;w.forEach((function(n){var r=t[n];f(r)&&(e[x[n]]=r)}))}(p,v),function(t,e){if(!t)return;Array.isArray(t)||(t=[t]);e.mpOptions.externalClasses=t,e.mpOptions.properties||(e.mpOptions.properties=Object.create(null));t.forEach((function(t){e.mpOptions.properties[g(t)]={type:String,value:""}}))}(h,v),C(e,v),$(e),v}(e);n.mixins.unshift(Q),n.mpOptions.path=t.__wxRoute,function(t){t.onServiceAttached||(t.onServiceAttached=[]);t.onServiceAttached.push((function(){N(this,"linked")}))}(n),t.__wxComponents[t.__wxRoute]=n},e.Page=function(e){var n=function(t){var e={mixins:[],mpOptions:{}};return u(e),s(t.data,e),function(t,e){var n=Object.create(null);Object.keys(t).forEach((function(e){var r=t[e];f(r)&&-1===y.indexOf(e)&&(n[e]=r)})),e.methods=n}(t,e),function(t,e){Object.keys(t).forEach((function(n){-1!==y.indexOf(n)&&(e[n]=t[n])}))}(t,e),e}(e);n.mixins.unshift(Q),n.mpOptions.path=t.__wxRoute,t.__wxComponents[t.__wxRoute]=n},e.nextTick=e.default=void 0;var o=r(n("ade3")),i=r(n("3835"));n("d3b7"),n("ac1f"),n("5319"),n("b64b"),n("159b"),n("c975"),n("14d9"),n("d81d"),n("7db0"),n("7a82"),n("13d5"),n("fb6a"),n("baa5"),n("4d63"),n("c607"),n("2c3e"),n("25f0"),n("a9e3"),n("99af"),n("e9c4"),n("1d1c"),n("4de4"),n("3c65");var a,c=r(n("e143"));function s(t,e){t&&(e.mpOptions.data=t)}function u(e){e.components=t.__wxVueOptions.components}var l=Object.prototype.toString,d=Object.prototype.hasOwnProperty;function f(t){return"function"===typeof t}function p(t){return"[object Object]"===l.call(t)}function h(t,e){return d.call(t,e)}function v(){}var m=/-(\w)/g,g=function(t){var e=Object.create(null);return function(n){var r=e[n];return r||(e[n]=t(n))}}((function(t){return t.replace(m,(function(t,e){return e?e.toUpperCase():""}))})),_={created:"onServiceCreated",attached:"onServiceAttached",ready:"mounted",moved:"moved",detached:"destroyed"},b=Object.keys(_),x={show:"onPageShow",hide:"onPageHide",resize:"onPageResize"},w=Object.keys(x),y=["onLoad","onShow","onReady","onHide","onUnload","onPullDownRefresh","onReachBottom","onShareAppMessage","onPageScroll","onResize","onTabItemTap"];function k(t,e){t&&(e.mpOptions.properties=t)}function O(t,e){t&&(t.$emit&&(console.warn('Method "$emit" conflicts with an existing Vue instance method'),delete t.$emit),e.methods=t)}function C(t,e){b.forEach((function(n){h(t,n)&&(e[_[n]]||(e[_[n]]=[])).push(t[n])}))}var S={"wx://form-field":{},"wx://component-export":{}};function $(t,e){(function(t){var e=t.behaviors,n=t.definitionFilter,r=[];if(Array.isArray(e)&&e.forEach((function(e){e="string"===typeof e?S[e]:e,e.definitionFilter&&(r.push(e.definitionFilter),e.definitionFilter.call(null,t,[]))})),f(n));})(t)}var T={"wx://form-field":{beforeCreate:function(){var t=this.$options.mpOptions;t.properties||(t.properties=Object.create(null));var e=t.properties;h(e,"name")||(e.name={type:String}),h(e,"value")||(e.value={type:String})}}};function j(t,e){t&&t.forEach((function(t){"string"===typeof t?T[t]&&e.mixins.push(T[t]):e.mixins.push(function(t){var e=t.data,n=t.methods,r=t.behaviors,o=t.properties,i={watch:{},mpOptions:{mpObservers:[]}};return s(e,i),O(n,i),j(r,i),k(o,i),C(t,i),$(t),i}(t))}))}function R(t){return t.split(",").map((function(t){return function(t){return t.split(".")}(t)}))}function E(t,e,n,r){if(e){var o="_$".concat(t,"Handlers");(r[o]||(r[o]=[])).push((function(){e.call(r,n)}))}}function M(t,e,n){var r=t.name,o=n._$relationNodes||(n._$relationNodes=Object.create(null));(o[r]||(o[r]=[])).push(e),E("linked",t["linked"],e,n)}function P(t,e,n){E("unlinked",t["unlinked"],e,n)}function B(t,e,n){var r=t&&t.$options.mpOptions&&t.$options.mpOptions.relations;if(!r)return[];var o=Object.keys(r).find((function(t){var o=r[t];return o.target===e&&o.type===n}));return o?[r[o],t]:[]}function I(t,e,n){var r=n(t,t.$options.mpOptions.path),o=(0,i.default)(r,2),a=o[0],c=o[1];a&&(M(a,t,c),M(e,c,t),P(a,t,c),P(e,c,t))}function L(t){var e=t.$options.mpOptions||{},n=e.relations;n&&Object.keys(n).forEach((function(e){(function(t,e){var n=t.type;"parent"===n?I(e,t,(function(t,e){return B(t.$parent,e,"child")})):"ancestor"===n&&I(e,t,(function(t,e){var n=t.$parent;while(n){var r=B(n,e,"descendant");if(r.length)return r;n=n.$parent}return[]}))})(n[e],t)}))}function N(t,e){var n=t["_$".concat(e,"Handlers")];n&&n.forEach((function(t){return t()}))}var F={enumerable:!0,configurable:!0,get:v,set:v};function z(t,e,n){F.get=function(){return this[e][n]},F.set=function(t){this[e][n]=t},Object.defineProperty(t,n,F)}function A(t,e){var n=this;p(t)&&(Object.keys(t).forEach((function(e){(function(t,e,n){var r=t.replace(/\[(\d+?)\]/g,".$1").split(".");return r.reduce((function(t,n,o){if(o!==r.length-1)return"undefined"===typeof t[n]&&(t[n]={}),t[n];t[n]=e}),n),1===r.length})(e,t[e],n.data)&&!h(n,e)&&z(n,"__data__",e)})),this.$forceUpdate(),f(e)&&this.$nextTick(e))}var U=Object.prototype.toString,D=function(t){return function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,r=U.call(n);if("[object Array]"===r)return e=n.slice(0),e;if("[object Object]"===r){for(var o in n)e[o]=t(e[o],n[o]);return e}if("[object Date]"===r)return new Date(n.getTime());if("[object RegExp]"===r){var i=String(n),a=i.lastIndexOf("/");return new RegExp(i.slice(1,a),i.slice(a+1))}return n}("[object Array]"===U.call(t)?[]:{},t)},J=(a={},(0,o.default)(a,String,""),(0,o.default)(a,Number,0),(0,o.default)(a,Boolean,!1),(0,o.default)(a,Object,null),(0,o.default)(a,Array,[]),(0,o.default)(a,null,null),a);function H(t){return J[t]}function G(t){return p(t)?t.type:t}function K(t,e,n,r){var o=n[t];if(void 0!==o){var i=e[t],a=G(i);o=V(o,a);var c=i&&i.observer;return c&&setTimeout((function(){Y(c,r,o)}),4),o}return function(t){return p(t)?h(t,"value")?t.value:H(t.type):H(t)}(e[t])}function V(t,e){return e===Boolean?!!t:e===String?String(t):t}function Y(t,e,n,r){try{"function"===typeof t?t.call(e,n,r):"string"===typeof t&&"function"===typeof e[t]&&e[t](n,r)}catch(o){console.error("execute observer ".concat(t," callback fail! err: ").concat(o))}}function W(t){var e=t.$options.mpOptions&&t.$options.mpOptions.properties,n=t.$options.propsData;n&&e&&Object.keys(e).forEach((function(r){h(n,r)&&(t[r]=V(n[r],G(e[r])))}))}function X(t){var e=JSON.parse(JSON.stringify(t.$options.mpOptions.data||{}));t["__data__"]=e;var n={get:function(){return t["__data__"]},set:function(e){t["__data__"]=e}};Object.defineProperties(t,{data:n,properties:n}),t.setData=A,function(t,e){var n=t.$options.mpOptions.properties;if(n){var r=D(t.$options.propsData)||{},o=function(o){var i=!!p(n[o])&&n[o].observer,a=K(o,n,r,t);Object.defineProperty(e,o,{enumerable:!0,configurable:!0,get:function(){return a},set:function(e){var n=a;e===a||e!==e&&a!==a||(a=Array.isArray(e)?e.slice(0):e,i&&Y(i,t,e,n),t.$forceUpdate())}})};for(var i in n)o(i)}}(t,e),Object.keys(e).forEach((function(e){z(t,"__data__",e)}))}var Q={beforeCreate:function(){this._renderProxy=this,this._$self=this,this._$noop=v},created:function(){X(this),function(t){var e=t.$emit;t.triggerEvent=function(n,r,o){var i={dataset:t.$el.dataset},a={target:i,currentTarget:i,detail:r,preventDefault:v,stopPropagation:v};e.call(t,n,a)},t.$emit=function(){t.triggerEvent.apply(t,arguments)},t.getRelationNodes=function(e){return(t._$relationNodes&&t._$relationNodes[e]||[]).filter((function(t){return!t._isDestroyed}))},t._$updateProperties=W}(this),L(this)},mounted:function(){(function(t){var e=t.$options.watch;e&&Object.keys(e).forEach((function(n){var r=e[n];if(r.mounted){var o=t[n],i=r.handler;"string"===typeof i&&(i=t[i]),i&&i.call(t,o,o)}}))})(this)},destroyed:function(){N(this,"unlinked")}};t.__wxRoute="",t.__wxComponents=Object.create(null),t.__wxVueOptions=Object.create(null);var Z=c.default.nextTick;e.nextTick=Z;var q=uni.__$wx__,tt=q;e.default=tt}).call(this,n("c8ba"))}}]);