(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["childPage-distribution-grade"],{"35c5":function(t,e,i){"use strict";(function(t){i("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("ac1f"),i("466d"),i("e9c4"),i("841c"),i("c975");var a=i("0a1b"),n={data:function(){return{productList:[],memberInfo:"",productInfo:"",active:0,isClick:!0,timer:0,avatarUrl:"",userInfo:JSON.parse(uni.getStorageSync("userInfo")),zsTip:t.baseImg+"/xcx/com/message_center/lan.png",jpTip:t.baseImg+"/xcx/com/message_center/jin.png",zsBack:t.baseImg+"/xcx/00931564-3ccb-481b-9d93-20d9f7a0101a.jpg",jpBack:t.baseImg+"/xcx/82f2189a-50cb-4830-b592-f17f3088d028.jpg"}},onLoad:function(t){t.order_id&&this.getPayResult(t.order_id);var e=navigator.userAgent.toLowerCase();"micromessenger"==e.match(/MicroMessenger/i)&&(null!=uni.getStorageSync("openid")&&"null"!=uni.getStorageSync("openid")&&""!=uni.getStorageSync("openid")||this.getCode())},onShow:function(){this.memberInfo=JSON.parse(uni.getStorageSync("distributionInfo")),this.avatarUrl=t.baseImg+"/"+uni.getStorageSync("avatarUrl"),this.getProduct(),clearInterval(this.timer)},onUnload:function(){console.log("隐藏了"),clearInterval(this.timer)},methods:{getProduct:function(){var t=this;(0,a.getProductList)({prod_cate_id:[4]}).then((function(e){2e4==e.code?e.data[4].length>0&&(t.productList=e.data[4],t.productInfo=e.data[4][0]):t.$api.msg(e.msg)})).catch((function(e){t.$api.msg("获取失败！")}))},selctProduct:function(t,e){this.active=t,this.productInfo=e},wxPay:function(){JSON.parse(uni.getStorageSync("userInfo"));var e={user_id:this.userInfo.user_id,prod_id:this.productInfo.prod_id,prod_cate_id:this.productInfo.prod_cate_id,prod_name:this.productInfo.prod_name,total_amount:this.productInfo.prod_price,price:this.productInfo.prod_price,quantity:1};if(0==this.isClick)return!1;this.isClick=!1;var i=this,n=navigator.userAgent.toLowerCase();"micromessenger"==n.match(/MicroMessenger/i)?(e.open_id=uni.getStorageSync("openid"),(0,a.wxpay)(e).then((function(t){if(2e4==t.code){var e=t.data[0].order_id;WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:t.data[0].req_data.app_id,timeStamp:t.data[0].req_data.time_stamp,nonceStr:t.data[0].req_data.nonce_str,package:t.data[0].req_data.package,signType:t.data[0].req_data.sign_type,paySign:t.data[0].req_data.pay_sign},(function(t){"get_brand_wcpay_request:ok"==t.err_msg?(i.getPayResult(e),i.isClick=!0):"get_brand_wcpay_request:fail"==t.err_msg?(console.log("支付失败"),i.isClick=!0):(console.log("取消支付"),i.isClick=!0)}))}else i.$api.msg(t.msg),i.isClick=!0})).catch((function(t){i.isClick=!0,i.$api.msg("获取支付信息失败！")}))):(0,a.webpay)(e).then((function(e){if(2e4==e.code){var a=e.data[0].order_id;i.isClick=!0;var n=encodeURIComponent(t.url+"/#/pages/distribution/grade?order_id="+a),o=e.data[0].req_data.mweb_url+"&redirect_url="+n;window.location.href=o}else i.$api.msg(e.msg),i.isClick=!0})).catch((function(t){i.isClick=!0,i.$api.msg("获取支付信息失败！")}))},pay:function(){var t=this,e=(JSON.parse(uni.getStorageSync("userInfo")),{user_id:this.userInfo.user_id,prod_id:this.productInfo.prod_id,prod_cate_id:this.productInfo.prod_cate_id,prod_name:this.productInfo.prod_name,total_amount:this.productInfo.prod_price,price:this.productInfo.prod_price,method:2,quantity:1});if(0==this.isClick)return!1;this.isClick=!1;var i=this,n=window.open("","_blank");(0,a.alipay)(e).then((function(e){if(2e4==e.code){var a=e.data[0].order_id;i.isClick=!0,n.location=e.data[0].pay_url,t.timer=setInterval((function(){i.getPayResult(a)}),2e3)}else console.log(e.msg,663),i.$api.msg(e.msg),i.isClick=!0})).catch((function(t){i.isClick=!0,i.$api.msg("获取支付信息失败！")}))},getPayResult:function(t){var e=this,i={order_id:t};(0,a.getResult)(i).then((function(t){if(2e4==t.code)if(1==t.data[0].status){e.$api.msg("支付成功"),e.isClick=!0,clearInterval(e.timer);var i=JSON.stringify(t.data[0]);uni.redirectTo({url:"/pages/user/vip/pay_success?info="+i})}else 2==t.data[0].status?(e.isClick=!0,clearInterval(e.timer),e.$api.msg("已退款")):(3==t.data[0].status||4==t.data[0].status)&&(e.isClick=!0,clearInterval(e.timer),e.$api.msg("支付失败"));else clearInterval(e.timer),e.isClick=!0,e.$api.msg(t.msg)})).catch((function(t){clearInterval(e.timer),e.isClick=!0,e.$api.msg("获取支付结果失败！")}))},checkAgree:function(){uni.navigateTo({url:"/pages/agree/agree?agree_type=5"})},cooperate:function(){uni.navigateTo({url:"/pages/user/cooperate/cooperate"})},getCode:function(){var e=t.url+"/#/pages/user/vip/vip";if(this.code=this.getUrlCode().code,null==this.code||""==this.code){var i="https://open.weixin.qq.com/connect/oauth2/authorize?appid=wxfe35c4c93a227f12&redirect_uri="+encodeURIComponent(e)+"&response_type=code&scope=snsapi_base&state=STATE#wechat_redirect";window.location.href=i}else{var a={"content-type":"application/x-www-form-urlencoded",source:t.source},n={code:this.code};uni.request({url:t.loginUrl+"/api/user/get_open_id",data:n,header:a,method:"POST",success:function(t){2e4==t.data.code?uni.setStorageSync("openid",t.data.data):console.log("获取openid失败")}})}},getUrlCode:function(){var t=location.search,e=new Object;if(-1!=t.indexOf("?"))for(var i=t.substr(1),a=i.split("&"),n=0;n<a.length;n++)e[a[n].split("=")[0]]=a[n].split("=")[1];return console.log(e,"111"),e}}};e.default=n}).call(this,i("c8ba"))},5322:function(t,e,i){var a=i("8c4b");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("54574b78",a,!0,{sourceMap:!1,shadowMode:!1})},6552:function(t,e,i){"use strict";i.r(e);var a=i("35c5"),n=i.n(a);for(var o in a)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(o);e["default"]=n.a},8192:function(t,e,i){"use strict";var a=i("5322"),n=i.n(a);n.a},"8c4b":function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,".head[data-v-6e78410d]{width:100%;height:%?240?%;padding:%?20?% %?32?%;position:relative}.head_img[data-v-6e78410d]{width:100%;height:%?240?%}.head_cont[data-v-6e78410d]{width:100%;display:flex;position:absolute;top:%?88?%;margin-left:%?40?%}.cont_img[data-v-6e78410d]{width:%?104?%;height:%?104?%;border-radius:50%}.nickname[data-v-6e78410d]{margin-left:%?20?%;margin-top:%?10?%;display:flex;align-items:center}.nickname .nickname_l[data-v-6e78410d]{font-style:normal;font-weight:500;font-size:%?36?%;line-height:120%;color:#fff;max-width:%?180?%;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.nickname .tip_img[data-v-6e78410d]{width:%?120?%;height:%?34?%;margin-left:%?20?%}.desc[data-v-6e78410d]{margin-left:%?20?%;margin-top:%?12?%;font-style:normal;font-weight:400;font-size:%?24?%;line-height:120%;text-transform:uppercase;color:#fff}.container[data-v-6e78410d]{width:100%;padding:%?40?% %?32?%;display:flex;flex-wrap:wrap;padding-bottom:%?100?%}.container_item[data-v-6e78410d]{width:30%;\n  /* height: 240upx; */\n  /* margin-left: 32upx; */background:#fff;border-radius:8px;margin:%?10?% 1.6%}.cont_time[data-v-6e78410d]{width:%?140?%;height:%?40?%;background:linear-gradient(180deg,#ee7863,#eb504b);border-radius:8px 0;display:flex;justify-content:center;align-items:center;font-family:PingFang SC;font-style:normal;font-weight:500;font-size:10px;line-height:14px;color:#fff}.cont_desc[data-v-6e78410d]{font-family:PingFang SC;font-style:normal;font-weight:500;font-size:%?32?%;line-height:150%;display:flex;align-items:center;justify-content:center;color:#222;margin-top:%?20?%}.cont_price[data-v-6e78410d]{display:flex;justify-content:center;align-items:flex-end;padding:%?30?% 0}.price_left[data-v-6e78410d]{font-family:PingFang SC;font-style:normal;font-weight:600;font-size:%?28?%;line-height:%?38?%;color:#eb504b}.price_right[data-v-6e78410d]{font-family:PingFang SC;font-style:normal;font-weight:600;font-size:%?48?%;line-height:%?48?%;color:#eb504b}.cont_original[data-v-6e78410d]{font-family:PingFang SC;font-style:normal;font-weight:400;font-size:%?24?%;line-height:150%;display:flex;align-items:center;justify-content:center;color:#999;margin-bottom:%?20?%}.bottom[data-v-6e78410d]{width:100%;background:#fff;position:fixed;bottom:0}.bottom_cont[data-v-6e78410d]{display:flex;justify-content:center;flex-direction:column;padding:%?25?% 0}.bottom_buy[data-v-6e78410d]{width:90%;height:%?80?%;background:#1f64ff;border-radius:6px;font-family:PingFang SC;font-style:normal;font-weight:500;font-size:14px;line-height:20px;color:#fff;display:flex;justify-content:center;align-items:center;margin:%?20?% auto 0}.bottom_desc[data-v-6e78410d]{width:%?624?%;height:%?34?%;font-family:PingFang SC;font-style:normal;font-weight:400;font-size:%?24?%;line-height:%?34?%;margin:%?20?% auto 0;text-align:center}.cont_tip[data-v-6e78410d]{display:flex;flex-direction:column;padding:0 %?32?% %?230?% %?32?%}.cont_tip .tip_title[data-v-6e78410d]{display:flex;align-items:center;margin-bottom:%?18?%}.cont_tip .tip_title .tip_l[data-v-6e78410d]{width:%?6?%;height:%?28?%;background:#1f64ff}.cont_tip .tip_title .tip_r[data-v-6e78410d]{font-style:normal;font-weight:400;font-size:%?28?%;line-height:%?42?%;color:#333;padding-left:%?20?%}.cont_tip .tip_text[data-v-6e78410d]{font-weight:400;font-size:%?26?%;line-height:%?40?%;color:#888;padding:0 0 %?15?% %?15?%}.cont_tip .tip_text .tip_link[data-v-6e78410d]{color:#1f64ff;padding:0 %?10?%}",""]),t.exports=e},f337:function(t,e,i){"use strict";i.r(e);var a=i("f45e"),n=i("6552");for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);i("8192");var s=i("f0c5"),r=Object(s["a"])(n["default"],a["b"],a["c"],!1,null,"6e78410d",null,!1,a["a"],void 0);e["default"]=r.exports},f45e:function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("v-uni-view",{staticClass:"head"},[1==t.memberInfo.d_level?i("v-uni-image",{staticClass:"head_img",attrs:{src:t.zsBack,mode:""}}):t._e(),2==t.memberInfo.d_level?i("v-uni-image",{staticClass:"head_img",attrs:{src:t.jpBack,mode:""}}):t._e(),i("v-uni-view",{staticClass:"head_cont"},[i("v-uni-image",{staticClass:"cont_img",attrs:{src:t.avatarUrl,mode:""}}),i("v-uni-view",{staticClass:"head_desc"},[i("v-uni-view",{staticClass:"nickname"},[i("v-uni-text",{staticClass:"nickname_l",style:[{color:2==t.memberInfo.d_level?"#0A42BE":""}]},[t._v(t._s(t.userInfo.nick_name))]),1==t.memberInfo.d_level?i("v-uni-image",{staticClass:"tip_img",attrs:{src:t.zsTip,mode:""}}):t._e(),2==t.memberInfo.d_level?i("v-uni-image",{staticClass:"tip_img",attrs:{src:t.jpTip,mode:""}}):t._e()],1),1==t.memberInfo.d_level?i("v-uni-view",{staticClass:"desc"},[t._v("升级金牌分销享受更多权益")]):t._e(),2==t.memberInfo.d_level?i("v-uni-view",{staticClass:"desc",staticStyle:{color:"#0A42BE"}},[t._v("会员有效期:"+t._s(t.memberInfo.expire_time.slice(0,10)))]):t._e()],1)],1)],1),i("v-uni-view",{staticClass:"container"},t._l(t.productList,(function(e,a){return i("v-uni-view",{key:a,staticClass:"container_item",style:[{border:t.active==a?"1px solid #1F64FF":"none"}],on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.selctProduct(a,e)}}},[i("v-uni-view",{staticClass:"cont_time"},[t._v(t._s(e.prod_desc.valid))]),i("v-uni-view",{staticClass:"cont_desc"},[t._v(t._s(e.prod_name))]),i("v-uni-view",{staticClass:"cont_price"},[i("v-uni-text",{staticClass:"price_left"},[t._v("￥")]),i("v-uni-text",{staticClass:"price_right"},[t._v(t._s(e.prod_price))])],1)],1)})),1),i("v-uni-view",{staticClass:"cont_tip"},[i("v-uni-view",{staticClass:"tip_title"},[i("v-uni-text",{staticClass:"tip_l"}),i("v-uni-text",{staticClass:"tip_r"},[t._v("升级分销&升级须知")])],1),i("v-uni-view",{staticClass:"tip_text"},[t._v("分销服务为虚拟商品，支付成功后不支持退款。")]),i("v-uni-view",{staticClass:"tip_text"},[t._v("充值99元您将升级成为金牌分销，佣金15%提升到30%，享有更高佣金福利。")]),i("v-uni-view",{staticClass:"tip_text"},[t._v("想享有更高佣金，"),i("v-uni-text",{staticClass:"tip_link",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.cooperate.apply(void 0,arguments)}}},[t._v("点我")]),t._v("申请升级为服务商。")],1)],1),i("v-uni-view",{staticClass:"bottom"},[i("v-uni-view",{staticClass:"bottom_cont"},[i("v-uni-view",{staticClass:"bottom_buy",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.wxPay.apply(void 0,arguments)}}},[t._v("立即购买")]),i("v-uni-view",{staticClass:"bottom_desc"},[i("v-uni-text",[t._v("开通会员即默认接受")]),i("v-uni-text",{staticStyle:{color:"#1F64FF"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.checkAgree.apply(void 0,arguments)}}},[t._v("《分销服务协议》")])],1)],1)],1)],1)},n=[]}}]);